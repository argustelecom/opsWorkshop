<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core">
	<p:dialog id="add_phone_number_dlg"
			  header="#{resourceBundle['box.nri.resources.add_phone_dlg.header']}"
			  widgetVar="addPhoneNumberDlg" resizable="false" modal="true" closable="false"
			  styleClass="icon-creation" style="max-width: 75%; min-width: 50%;">
		<p:tabView>
			<p:tab title="#{resourceBundle['box.nri.resources.add_phone_dlg.range']}">
				<h:form id="add_numbers_range_form">
					<dl class="name-value">
						<dt><p:outputLabel for="phoneSpec" value="#{overallBundle['box.overall.type']}:"/></dt>
						<dd>
							<p:selectOneMenu id="phoneSpec" value="#{resourceLogicalResFM.phoneSpec}" required="true">
								<f:selectItem value="#{null}" itemLabel=""/>
								<f:selectItems value="#{resourceLogicalResFM.possiblePhoneSpecs}" var="spec"
											   itemValue="#{spec}" itemLabel="#{spec.objectName}"/>
								<p:ajax event="change" update="@form-from @form-to" process="@this"/>
							</p:selectOneMenu>
						</dd>
						<dt><p:outputLabel for="from" value="#{phoneNumberPoolBundle['box.nri.phone.from']}"/></dt>
						<dd>
							<p:inputMask id="from" value="#{resourceLogicalResFM.from}"
										 mask="#{resourceLogicalResFM.phoneSpec.mask}"
										 style="width: 100%;" maxlength="128" required="true"
										 requiredMessage="#{phoneNumberPoolBundle['box.nri.phone.first_number_required']}"/>
						</dd>
						<dt><p:outputLabel for="to" value="#{phoneNumberPoolBundle['box.nri.phone.to']}"/></dt>
						<dd>
							<p:inputMask id="to" value="#{resourceLogicalResFM.to}"
										 mask="#{resourceLogicalResFM.phoneSpec.mask}"
										 style="width: 100%;" maxlength="128" required="true"
										 requiredMessage="#{phoneNumberPoolBundle['box.nri.phone.last_number_required']}"/>
						</dd>
					</dl>
					<div class="dialog-footer-buttons">
						<p:commandButton id="cancel_add_numbers_from_range"
										 value="#{overallBundle['box.overall.cancel']}"
										 immediate="true"
										 styleClass="m-blue-text-button" onclick="PF('addPhoneNumberDlg').hide()">
						</p:commandButton>
						<p:commandButton id="add_numbers_from_range" value="#{overallBundle['box.overall.add']}"
										 action="#{resourceLogicalResFM.addPhoneNumbersFromRange}"
										 update="add_phone_number_confirm_dlg">
						</p:commandButton>
					</div>
				</h:form>
			</p:tab>
			<p:tab title="#{resourceBundle['box.nri.resource.pool']}">
				<h:form id="add_from_pool_form">
					<p:panelGrid style="border: 0; width: 100%" styleClass="ui-noborder">
						<p:row>
							<p:column style="width: 80%">
								<dl class="name-value width-120">
									<dt>
										<p:outputLabel value="#{resourceBundle['box.nri.resource.pool']}"/>
									</dt>
									<dd>
										<p:selectOneMenu value="#{resourceLogicalResFM.selectedPool}">
											<f:converter converterId="nriDtoConverter"/>
											<f:selectItem itemValue="#{null}" itemLabel=""/>
											<f:selectItems value="#{resourceLogicalResFM.availablePools}"
														   var="pool" itemLabel="#{pool.name}"/>
											<p:ajax event="change" process="@this" update="@form-phone"/>
										</p:selectOneMenu>
									</dd>
									<dt>
										<p:outputLabel value="#{resourceBundle['box.nri.resource.choose_number']}"/>
									</dt>
									<dd>
										<p:selectOneMenu id="phone" disabled="#{resourceLogicalResFM.allPoolPhoneNumbers}"
														 value="#{resourceLogicalResFM.newPhoneNumber}">
											<f:converter converterId="nriDtoConverter"/>
											<f:selectItems value="#{resourceLogicalResFM.availablePhoneNumbers}"
														   var="phoneNumber" itemLabel="#{phoneNumber.name}"/>
										</p:selectOneMenu>
									</dd>
								</dl>
							</p:column>
							<p:column style="width: 20%; vertical-align: top">
								<p:selectBooleanCheckbox value="#{resourceLogicalResFM.allPoolPhoneNumbers}"
														 label="#{phoneNumberPoolBundle['box.nri.phone.all_numbers']}"
														 style="display: inline-block; margin: 10px 10px 0 0">
									<p:ajax event="change" process="@this" update="phone"/>
								</p:selectBooleanCheckbox>
								<h:outputText value="#{resourceBundle['box.nri.resources.add_phone_dlg.all_pool']}"/>
							</p:column>
						</p:row>
					</p:panelGrid>

					<div class="dialog-footer-buttons">
						<p:commandButton id="cancel_add_phone_numbers_from_pool"
										 value="#{overallBundle['box.overall.cancel']}"
										 styleClass="m-blue-text-button" immediate="true"
										 onclick="PF('addPhoneNumberDlg').hide()"/>
						<p:commandButton id="add_phone_numbers_from_pool" value="#{overallBundle['box.overall.add']}"
										 action="#{resourceLogicalResFM.addPhoneNumbersFromPool}"
										 update="add_phone_number_confirm_dlg">
						</p:commandButton>
					</div>
				</h:form>
			</p:tab>
		</p:tabView>
	</p:dialog>
	<p:dialog id="add_phone_number_confirm_dlg" header="#{resourceBundle['box.nri.resource.warning']}" styleClass="dialog-without-icon"
			  widgetVar="addPhoneNumberConfirmDlg" resizable="false" modal="true" closable="false">
		<h:form id="add_phone_number_confirm_form">
			<div>
				<h:outputText value="#{resourceBundle['box.nri.resource.warning_message']}"/>
			</div>
			<div style="margin-top: 20px">
				<p:commandButton id="add" value="#{resourceBundle['box.nri.resource.add_all']}"
								 action="#{resourceLogicalResFM.addAllChosenPhoneNumbers}"
								 oncomplete="PF('addPhoneNumberDlg').hide(); PF('addPhoneNumberConfirmDlg').hide()"
								 update="logical_resources_form"/>
				<p:commandButton id="add_unused" value="#{resourceBundle['box.nri.resource.add_unused']}"
								 action="#{resourceLogicalResFM.addOnlyFreePhoneNumbers}"
								 oncomplete="PF('addPhoneNumberDlg').hide(); PF('addPhoneNumberConfirmDlg').hide()"
								 update="logical_resources_form"/>
				<p:commandButton id="cancel" value="#{overallBundle['box.overall.cancel']}"
								 oncomplete="PF('addPhoneNumberConfirmDlg').hide()" immediate="true"/>
			</div>
		</h:form>
	</p:dialog>
</ui:composition>