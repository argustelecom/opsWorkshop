<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
                xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:boxenv="http://argustelecom.ru/box/env">

    <f:loadBundle var="personalAreaBundle" basename="PersonalAreaBundle"/>
    <div class="m-container100 m-responsive100">
        <div class="m-container-indent">
            <div class="m-card m-shadow-effect custom-content-card simple-fb">
                <h:form id="subscriptions_form">

                    <script>
                        $( document ).ready(function() {
                            Argus.System.AutoHeight.compute('subscriptions_form', 40);
                        });
                    </script>

                    <div class="ui-dashboard-header ui-dashboard-header-dark">
                        <i class="fa fa-server" />
                        <h:outputText styleClass="card-header"
                                      value="#{personalAreaBundle['box.pa.home.service.plural']} (#{personalAreaVM.selectedAccount.activeSubscriptions.size()})"/>
                    </div>

                    <p:accordionPanel>
                        <c:forEach items="#{personalAreaVM.subscriptionMap.keySet()}" var="location">
                            <p:tab title="#{location.fullName} (#{personalAreaVM.subscriptionMap.get(location).size()})" titleStyleClass="fs18">
                                <p:dataTable value="#{personalAreaVM.subscriptionMap.get(location)}" var="entry"
                                             styleClass="hide-tr-header">
                                    <p:column>
                                        <h:outputText value="#{entry.subject.objectName}" styleClass="fs16"
                                                      style="color: #1DA54A"
                                                      title="#{overallBundle['box.overall.state']}: #{entry.state.name}"/>

                                        <p:outputPanel styleClass="m-fright">
                                            <boxenv:money value="#{entry.cost}" size="fs14" unicolour="true"/><h:outputText value="/мес" styleClass="fs14 m-vertical-top"/>
                                        </p:outputPanel>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </c:forEach>
                    </p:accordionPanel>

                </h:form>
            </div>
        </div>
    </div>

</ui:composition>