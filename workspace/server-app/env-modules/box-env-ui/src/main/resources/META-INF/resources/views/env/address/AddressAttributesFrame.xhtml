<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<p:outputPanel id="location_attribute_panel">

		<f:attribute name="updateEvent" value="#{currentLocation.changedEvent}"/>
		<f:event listener="#{addressAttributesFM.preRender()}" type="preRenderComponent"/>

		<div class="m-container20">
			<p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank m-tex-al-center">
				<i class="#{addressAttributesFM.selectedLocationIcon} fs60"/>
				<h:outputText value="ID #{addressAttributesFM.location.id}"/>
			</p:panelGrid>
		</div>

		<div class="m-container80">
			<sysinf:editableSection disabled="#{!p:ifGranted('System_AddressStructureEdit') || addressAttributesFM.location == null}"
									saveLabel="#{overallBundle['box.overall.save']}"
									cancelLabel="#{overallBundle['box.overall.cancel']}">

				<p:ajax event="save" listener="#{addressAttributesFM.handleChange()}" update="#{update}"/>

				<dl class="name-value width-130 m-font-roboto-regular">
					<dt>
						<p:outputLabel for="place" value="#{locationBundle['box.location']}:"
									   rendered="#{!addressAttributesFM.selectedCountry}"/>
					</dt>
					<dd>
						<h:outputText id="place" value="#{addressAttributesFM.location.parent.fullName}"
									  rendered="#{!addressAttributesFM.selectedCountry}" styleClass="m-mar-left-8"/>
					</dd>

					<dt>
						<p:outputLabel for="name" value="#{overallBundle['box.overall.name']}:"/>
					</dt>

					<dd>
						<p:inputText id="name" value="#{addressAttributesFM.location.name}" maxlength="64" required="true"
									 label="#{overallBundle['box.overall.name']}"/>
					</dd>

					<dt>
						<p:outputLabel for="type" value="#{locationBundle['box.location.type']}:"
									   rendered="#{!addressAttributesFM.selectedCountry}"/>
					</dt>
					<dd>
						<p:selectOneMenu id="type"  value="#{addressAttributesFM.location.type}" rendered="#{!addressAttributesFM.selectedCountry}">
							<f:selectItems value="#{addressAttributesFM.types}" var="locationType"
										   itemLabel="#{locationType.objectName}" itemValue="#{locationType}"/>
						</p:selectOneMenu>
					</dd>

				</dl>
			</sysinf:editableSection>
		</div>

	</p:outputPanel>

</ui:composition>