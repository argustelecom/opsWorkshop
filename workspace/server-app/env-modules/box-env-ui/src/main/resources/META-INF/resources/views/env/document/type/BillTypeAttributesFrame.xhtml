<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui"
				xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:f="http://java.sun.com/jsf/core"
		>

	<f:loadBundle var="billBundle" basename="BillBundle"/>

	<p:outputPanel styleClass="fs14">
		<f:event listener="#{billTypeAttributesFm.preRender(documentTypeDto)}" type="preRenderComponent"/>

		<div class="columns">
			<div class="column m-pad-0">
				<p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank m-tex-al-center column-id">
					<i class="#{billTypeAttributesFm.category.icon} fs60"></i>
					<h:outputText
							value="#{overallBundle['box.overall.id']} #{billTypeAttributesFm.documentTypeDto.id}"/>
				</p:panelGrid>
			</div>
			<div class="column width-100-percents">
				<div class="columns">
					<div class="column m-container50 m-responsive100">

						<!--Название-->
						<sysinf:editableSection disabled="#{readonly}" saveLabel="#{overallBundle['box.overall.save']}"
												cancelLabel="#{overallBundle['box.overall.cancel']}">
							<p:ajax event="save" update="#{update}" listener="#{billTypeAttributesFm.save}"/>
							<dl class="name-value width-130">
								<dt>
									<p:outputLabel for="doctypedto_name" value="#{overallBundle['box.overall.name']}:"/>
								</dt>

								<dd>
									<p:inputText id="doctypedto_name" required="true" maxlength="128"
												 title="#{billTypeAttributesFm.documentTypeDto.name}"
												 value="#{billTypeAttributesFm.documentTypeDto.name}"/>
								</dd>
							</dl>
						</sysinf:editableSection>

						<dl class="name-value width-140 m-font-roboto-regular">

							<!--Тип клиента-->
							<dt>
								<p:outputLabel for="doctypedto_customer_type_dto"
											   value="#{billBundle['box.bill.customer.type']}:"/>
							</dt>
							<dd>
								<h:outputText id="doctypedto_customer_type_dto"
											  value="#{billTypeAttributesFm.documentTypeDto.customerTypeDto.name}"/>
							</dd>

							<!--Тип периода-->
							<dt>
								<p:outputLabel for="doctypedto_period_type"
											   value="#{billBundle['box.bill.period.type']}:"/>
							</dt>
							<dd>
								<h:outputText id="doctypedto_period_type"
											  value="#{billTypeAttributesFm.period}"/>
							</dd>

							<!--Схема расчета-->
							<dt>
								<p:outputLabel for="doctypedto_payment_condition"
											   value="#{billBundle['box.bill.payment_condition']}:"/>
							</dt>
							<dd>
								<h:outputText id="doctypedto_payment_condition"
											  value="#{billTypeAttributesFm.documentTypeDto.paymentCondition.name}"/>
							</dd>

							<!--Группировка-->
							<dt>
								<p:outputLabel for="doctypedto_grouping"
											   value="#{billBundle['box.bill.grouping_method']}:"/>
							</dt>
							<dd>
								<h:outputText id="doctypedto_grouping"
											  value="#{billTypeAttributesFm.documentTypeDto.groupingMethod.name}"/>
							</dd>

							<!--Сумма к оплате-->
							<dt>
								<p:outputLabel for="doctypedto_payment_sum" value="#{billBundle['box.bill.summary']}:"/>
							</dt>
							<dd>
								<h:outputText id="doctypedto_payment_sum"
											  styleClass="m-disp-block data-overflow-ellipsis"
											  value="#{billTypeAttributesFm.documentTypeDto.billAnalyticTypeDto.name}"/>
							</dd>
						</dl>
					</div>

					<div class="column m-container50 m-responsive100">
						<div class="m-pos-relative">
							<div class="hover-overlay-block">
								<dl class="name-value width-90">

									<dt>
										<p:outputLabel for="bill_type_attr_provider" value="#{documentTypeBundle['box.doc.type.bill.provider']}:"/>
									</dt>
									<dd>
										<h:outputText id="bill_type_attr_provider" value="#{billTypeAttributesFm.documentTypeDto.providers.get(0).name}"/>
										<p:outputPanel id="provider_list_panel" styleClass="auto-height" rendered="#{billTypeAttributesFm.documentTypeDto.providers.size() gt 1}">
											<p:commandLink id="provider_popup"
														   value="#{documentTypeBundle['box.doc.type.bill.provider.all']} #{billTypeAttributesFm.documentTypeDto.providers.size()}"/>

											<p:overlayPanel id="provider_expand_panel" appendToBody="true" widgetVar="billTypeProviderPanelVar" hideEffect="fade"
															for="provider_popup" styleClass="panel" style="position: fixed; top: 50%; left: 70%;">
												<ui:repeat value="#{billTypeAttributesFm.documentTypeDto.providers}" var="provider">
													<li>
														<h:outputText value="#{provider.name}"/>
													</li>
												</ui:repeat>
											</p:overlayPanel>
										</p:outputPanel>
									</dd>
								</dl>

								<sysinf:editableSection disabled="#{readonly}"
														saveLabel="#{overallBundle['box.overall.save']}"
														cancelLabel="#{overallBundle['box.overall.cancel']}">
									<p:ajax event="save" update="#{update}" listener="#{billTypeAttributesFm.save}"/>
									<dl class="name-value width-85">
										<dt>
											<p:outputLabel for="doctypedto_desc" value="#{overallBundle['box.overall.desc']}:"/>
										</dt>
										<dd class="auto-height bill-description">
											<p:inputTextarea id="doctypedto_desc"
															 value="#{billTypeAttributesFm.documentTypeDto.description}"
															 rows="1" counter="doctypedto_desc_counter" maxlength="256"
															 counterTemplate="#{overallBundle['box.overall.chars_left']}"/>
											<h:outputText id="doctypedto_desc_counter" styleClass="fs12"/>
										</dd>
									</dl>
								</sysinf:editableSection>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</p:outputPanel>
</ui:composition>