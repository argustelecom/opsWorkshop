<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<f:loadBundle var="orderBundle" basename="OrderBundle"/>
	<div class="#{containerClass eq null ? 'm-container50' : containerClass} m-responsive100">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect custom-content-card simple-fb">
				<h:form id="order_requirements_form">

					<o:importConstants type="ru.argustelecom.box.env.order.lifecycle.OrderLifecycle.Behaviors" var="behavior"/>

					<div class="ui-dashboard-header">
						<i class="fa fa-th-list"/>
						<h:outputText styleClass="card-header" value="#{orderBundle['box.order.requirement']}"/>

						<p:outputPanel styleClass="m-fright">
							<p:commandLink styleClass="m-mar-left10" onclick="PF('addRequirementDlgVar').show()"
										   title="#{overallBundle['box.overall.add']}"
											rendered="#{!behaviorUtils.isForbidden(orderRequirementsFrameModel.order, behavior.addRequirement)}"
											disabled="#{!p:ifGranted('CRM_OrderEdit')}">
											<i class="fa fa-edit icon-btn"/>
							</p:commandLink>
						</p:outputPanel>
					</div>

					<p:dataScroller var="requirement" chunkSize="10" mode="inline" scrollHeight="300"
									value="#{orderRequirementsFrameModel.order.unmodifiableRequirements}">
						<div class="m-card m-shadow-effect">
							<h:outputText styleClass="fs16 m-pad10 m-disp-inl-block" value="#{requirement.objectName}"/>

							<div class="m-fright mar-top-halfem">
								<p:commandButton icon="fa fa-remove red" action="#{orderRequirementsFrameModel.removeRequirement(requirement)}"
												 process="@this" styleClass="remove-card-btn" update="order_requirements_form #{update}"
												 rendered="#{!behaviorUtils.isForbidden(orderOffersFrameModel.order, behavior.addRequirement)}"
												 disabled="#{!p:ifGranted('CRM_OrderEdit')}">
									<p:confirm header="#{orderBundle['box.order.requirement.delete_dialog']}"
											   message="#{orderBundle['box.order.requirement.delete_dialog.details']} '#{requirement.objectName}'"/>
								</p:commandButton>
							</div>
						</div>
					</p:dataScroller>

					<ui:include src="AddRequirementToOrderDialog.xhtml">
						<ui:param name="update" value="order_requirements_form #{update}"/>
					</ui:include>

				</h:form>
			</div>
		</div>
	</div>

</ui:composition>