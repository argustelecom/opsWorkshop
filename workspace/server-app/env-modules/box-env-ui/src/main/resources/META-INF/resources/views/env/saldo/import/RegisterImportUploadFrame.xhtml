<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
              xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
              xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
              xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:p="http://primefaces.org/ui"
              xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
              xmlns:sysinf="http://argustelecom.ru/system-inf">

    <f:loadBundle var="saldoImportBundle" basename="SaldoImportBundle"/>
    <div class="m-container100 m-responsive100">

        <div class="m-mar-top5">

            <div class="m-card m-shadow-effect custom-content-card simple-fb">

                <div class="ui-dashboard-header">
                    <i class="fa fa-file-o"/>
					<h:outputText styleClass="card-header"
                                  value="#{saldoImportBundle['box.saldo.import.step.upload.upload']}"/>
                </div>
                <div class="column m-pad-top-16">
                    <div class="columns width-30-percents message-icon message-icon-info">

                        <dl class="name-value width-300">
                            <dt class="data-overflow-break">
                                <p:outputLabel for="register_format" value="#{saldoImportBundle['box.saldo.import.step.upload.hint']}:"/>
                            </dt>
                            <dd>
                                <p:selectOneMenu id="register_format" value="#{registerImportVM.selectedRegisterFormat}" required="true"
                                                 label="#{saldoImportBundle['box.saldo.import.step.upload.hint']}">
                                    <f:selectItem itemLabel=""/>
                                    <f:selectItems value="#{registerImportVM.registerFormats}" var="selectedRegisterFormat"
                                                   itemValue="#{selectedRegisterFormat}"
                                                   itemLabel="#{selectedRegisterFormat.name}"/>
                                    <p:ajax process="@this" update="upload_step_panel"/>
                                </p:selectOneMenu>
                            </dd>
                        </dl>
                    </div>
                </div>
                <p:outputPanel id="upload_step_panel">
                    <ui:fragment rendered="#{registerImportVM.file eq null}">
                        <p:fileUpload fileUploadListener="#{registerImportVM.handleFileUpload}"
                                      mode="advanced" label="#{overallBundle['box.overall.upload']}" update="upload_file_form-upload_step_panel"
                                      auto="true" allowTypes="#{registerImportVM.selectedRegisterFormat.allowTypeRegexp}"
                                      required="true" process="@this" multiple="true"/>
                    </ui:fragment>

                    <p:outputPanel rendered="#{registerImportVM.file ne null}">
                        <h:outputText styleClass="fs16 m-disp-inl-block m-mar-right10"
                                      value="#{saldoImportBundle['box.saldo.import.step.upload.uploaded']}:"/>
                        <h:outputText styleClass="fs18 break-word m-font-roboto-regular" value="#{registerImportVM.fileName}"/>

                        <p:commandLink action="#{registerImportVM.removeFile()}" process="@this" update="upload_file_form-upload_step_panel">
                            <i class="icon-cancel m-red fs24"/>
                        </p:commandLink>
                    </p:outputPanel>

                </p:outputPanel>

            </div>

        </div>

    </div>

</ui:composition>
