<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<f:loadBundle var="orderBundle" basename="OrderBundle"/>
	<div class="m-container100 m-responsive100">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect m-hei-auto-on-mobile">
				<h:form id="order_attributes_form">
					<div class="columns">

						<div class="column m-vertical-al-middle m-pad-0">
							<p:panelGrid id="order_id_grid" columns="1" layout="grid" styleClass="ui-panelgrid-blank m-tex-al-center column-id">
								<i class="fs50 fa fa-edit (alias)"/>
								<h:outputText styleClass="fs16"
											  value="#{overallBundle['box.overall.id']} #{orderAttributesFrameModel.order.id}" />
							</p:panelGrid>
						</div>

						<o:importConstants type="ru.argustelecom.box.env.order.lifecycle.OrderLifecycle.Behaviors" var="behavior"/>
						<div class="column width-100-percents">
							<div class="columns">
								<div class="column width-10-percents">
									<sysinf:editableSection disabled="#{!p:ifGranted('CRM_OrderEdit')}"
															saveLabel="#{overallBundle['box.overall.save']}"
															cancelLabel="#{overallBundle['box.overall.cancel']}">
										<dl class="name-value width-150">
											<dt>
												<p:outputLabel for="priority"
															   value="#{orderBundle['box.order.priority']}:"/>
											</dt>
											<dd>
												<p:selectOneMenu id="priority" value="#{orderAttributesFrameModel.order.priority}"
																 label="#{orderBundle[orderAttributesFrameModel.order.priority.name]}"
																 disabled="#{behaviorUtils.isForbidden(orderAttributesFrameModel.order, behavior.priority)}">
													<f:selectItems value="#{orderAttributesFrameModel.priorities}" var="orderPriority"
													itemValue="#{orderPriority}" itemLabel="#{orderPriority.name}"/>
												</p:selectOneMenu>
											</dd>

											<dt>
												<p:outputLabel for="state"
															   value="#{overallBundle['box.overall.state']}:"/>
											</dt>
											<dd>
												<h:outputText id="state" styleClass="m-mar-left-8" value="#{orderAttributesFrameModel.order.state.name}"/>
											</dd>

											<dt>
												<p:outputLabel for="creation_date"
															   value="#{orderBundle['box.order.created']}:"/>
											</dt>
											<dd>
												<h:outputText id="creation_date" styleClass="m-mar-left-8" value="#{orderAttributesFrameModel.order.creationDate}"/>
											</dd>

											<dt>
												<p:outputLabel for="assignee"
															   value="#{orderBundle['box.order.assignee']}:"/>
											</dt>
											<dd>
												<p:selectOneMenu id="assignee" value="#{orderAttributesFrameModel.order.assignee}"
																 disabled="#{behaviorUtils.isForbidden(orderAttributesFrameModel.order, behavior.assignee)}">
													<f:selectItems value="#{orderAttributesFrameModel.employees}" var="assignee"
																   itemValue="#{assignee}" itemLabel="#{assignee.objectName}"/>
												</p:selectOneMenu>
											</dd>
										</dl>
									</sysinf:editableSection>
								</div>

								<div class="column  width-10-percents">
								<sysinf:editableSection disabled="#{!p:ifGranted('CRM_OrderEdit')}"
														saveLabel="#{overallBundle['box.overall.save']}"
														cancelLabel="#{overallBundle['box.overall.cancel']}">
									<dl class="name-value width-150">
										<dt>
											<p:outputLabel for="due_date"
														   value="#{orderBundle['box.order.list.search.due']}:"/>
										</dt>
										<dd>
											<p:calendar id="due_date" value="#{orderAttributesFrameModel.order.dueDate}"
														disabled="#{behaviorUtils.isForbidden(orderAttributesFrameModel.order, behavior.dueDate)}"
														pattern="#{dateUtils.DATETIME_DEFAULT_PATTERN}"
														locale="#{languageBean.locale.language}"/>
										</dd>
									</dl>
								</sysinf:editableSection>
							</div>
							</div>
						</div>

						<div class="column m-tex-al-right m-pad-0">
							<div class="width-180">
								<ui:include src="/views/env/lifecycle/LifecycleFrame.xhtml">
									<ui:param name="businessObject" value="#{orderAttributesFrameModel.order}"/>
									<ui:param name="update" value="order_attributes_form activity_form"/>
									<ui:param name="styleClass" value="splitbutton-width-142 m-mar-bot10"/>
									<ui:param name="readonly" value="#{!p:ifGranted('CRM_OrderStatusEdit')}" />
								</ui:include>
							</div>
						</div>
					</div>
				</h:form>
			</div>
		</div>
	</div>

</ui:composition>