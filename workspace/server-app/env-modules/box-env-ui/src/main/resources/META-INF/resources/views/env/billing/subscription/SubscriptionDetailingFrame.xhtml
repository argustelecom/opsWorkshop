<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:boxenv="http://argustelecom.ru/box/env">
				
	<div class="m-container100 m-responsive100">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect simple-fb">
				<h:form id="subscription_detailing_form">
					
					<f:event type="preRenderComponent" listener="#{subscriptionDetailingFm.preRender(subscription)}"/>
					
					<div class="ui-dashboard-header">
						<i class="icon-receipt"/>
						<h:outputText value="Детализация списаний" styleClass="card-header"/>
					</div>
					
					<h:panelGroup id="timeline_panel">
						<!--
						Если timeline находится в форме, то для него нужно обязательно задать widgetVar, иначе не будут работать event'ы
						-->
						<pe:timeline id="timeline" value="#{subscriptionDetailingFm.timeline}" editable="false"
									 eventMarginAxis="0" var="event" widgetVar="timelineVar"
									 eventMargin="0" groupMinHeight="44"
									 start="#{subscriptionDetailingFm.timelineStart}"
									 end="#{subscriptionDetailingFm.timelineEnd}"
									 showNavigation="false" animate="false" animateZoom="false"
									 showButtonNew="false" axisOnTop="true" stackEvents="false"
									 min="#{subscriptionDetailingFm.startOfInterest}"
									 max="#{subscriptionDetailingFm.endOfInterest}">
							
							<p:ajax event="select" listener="#{subscriptionDetailingFm.onTimelineSelectEvent}"/>

						</pe:timeline>

						<style type="text/css">

							div.timeline-event-selected {
								background: #6c7072 none !important;
								border-color: #4f5254 !important;
							}

							div.timeline-axis-text {
								color: white;
							}

							div.timeline-event {
								color: white !important;
								border-radius: 5px !important;
							}

							div.timeline-event-content {
								padding: 5px;
								text-shadow: none;
							}

							div.unavailable {
								background: #ff5042 none !important; /* red */
								border-color: #bd2828 !important; /* red */
								opacity: 0.6;
								text-align: center;
							}

							div.invoicesStyle {
								background: #5aa152 none !important; /* green */
								border-color: #136e13 !important; /* green */
								opacity: 0.6;
								text-align: center;
							}

							div.lifecycleRoutingHistoryStyle {
								background: #79a5b7 !important;
								border-color: #6ab7b3 !important; /* orange */
								opacity: 0.6;
								text-align: center;
								width: 20px;
								min-width: 10px;;
							}

							div.accountingPeriodsStyle {
								background: #62696b none !important; /* orange */
								border-color: #3c3f41 !important; /* orange */
								text-align: center;
								opacity: 0.6;
							}

							div.timeline-frame {
								border-color: #4f5254;
								border-radius: 5px;
							}

							div.timeline-axis {
								border-color: #4f5254;
								background-color: #4f5254;
								filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#5D99C3', endColorstr='#3A6DA0') alpha(opacity=100);
								background: -webkit-gradient(linear, left top, left bottom, from(#4f5254), to(#3c3f41));
								background: -moz-linear-gradient(top, #4f5254, #3c3f41);
								-khtml-opacity: 1;
								-moz-opacity: 1;
								opacity: 0.7;
							}

						</style>
					</h:panelGroup>
					
					<h:panelGroup style="display:block; text-align:center">
						
						<p:commandButton id="go_prev" value="Назад"
										 styleClass="m-blue-text-button"
										 style="float: inherit;"
										 action="#{subscriptionDetailingFm.goPrev()}"
										 disabled="#{not subscriptionDetailingFm.canGoPrev()}"
										 update="subscription_detailing_form" />
										 
						<p:commandButton id="go_next" value="Вперед"
										 styleClass="m-blue-text-button"
										 action="#{subscriptionDetailingFm.goNext()}"
										 disabled="#{not subscriptionDetailingFm.canGoNext()}"
										 update="subscription_detailing_form" />
					</h:panelGroup>
				</h:form>
			</div>
		</div>
	</div>						
				
				
</ui:composition>