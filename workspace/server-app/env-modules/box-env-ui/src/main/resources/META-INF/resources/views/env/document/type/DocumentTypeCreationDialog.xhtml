<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
	xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:boxenv="http://argustelecom.ru/box/env">

	<h:form id="document_type_creation_form">

		<p:dialog id="document_type_creation_dlg" header="#{documentTypeCreationDm.dialogHeader}" width="600"
			widgetVar="documentTypeCreationDlgVar" styleClass="icon-creation" resizable="false" modal="true" closable="false"
			dynamic="true">

			<dl class="name-value width-150 fs14 name-value-tooltip">

				<dt>
					<p:outputLabel for="new_doctype_name" value="#{overallBundle['box.overall.name']}:" />
				</dt>
				<dd>
					<p:inputText id="new_doctype_name" value="#{documentTypeCreationDm.newDocTypeName}" required="true"
						label="#{overallBundle['box.overall.name']}" maxlength="128" />
				</dd>

				<dt>
					<p:outputLabel for="new_doctype_desc" value="#{overallBundle['box.overall.desc']}:" />
				</dt>
				<dd>
					<p:inputTextarea id="new_doctype_desc" value="#{documentTypeCreationDm.newDocTypeDesc}" rows="2"
						counter="new_doctype_desc_counter" maxlength="256" counterTemplate="#{overallBundle['box.overall.chars_left']}"
						autoResize="false" />
					<h:outputText id="new_doctype_desc_counter" styleClass="fs12" />
				</dd>

				<o:importConstants type="ru.argustelecom.box.env.document.type.DocumentTypeCategory" var="category" />
				<ui:fragment rendered="#{documentTypeCreationDm.newDocTypeCategory eq category.CONTRACT_TYPE}">
					<dt>
						<p:outputLabel for="agency" value="#{documentTypeBundle['box.doc.type.contract.agency']}:" />
					</dt>
					<dd>
						<p:selectBooleanCheckbox id="agency" value="#{documentTypeCreationDm.newAgency}">
							<p:ajax process="@this" update="provider" listener="#{documentTypeCreationDm.onAgencyChanged()}"/>
						</p:selectBooleanCheckbox>
						<h:outputText id="ptttp" class="icon-help_outline tooltip-help" position="top"
								  title="#{documentTypeBundle['box.doc.type.contract.agency.hint']}"/>
						<p:tooltip id="ttp1" for="ptttp"/>
					</dd>
					<dt>
						<p:outputLabel for="provider" value="#{documentTypeBundle['box.doc.type.contract.provider']}:" />
					</dt>
					<dd>
						<p:selectOneMenu id="provider" value="#{documentTypeCreationDm.newProvider}" required="true">
							<f:selectItems value="#{documentTypeCreationDm.possibleProviders}" var="provider"
								itemLabel="#{provider.name}" itemValue="#{provider}" />
						</p:selectOneMenu>
					</dd>
				</ui:fragment>

				<dt>
					<p:outputLabel for="new_doctype_customer_type" value="#{documentTypeBundle['box.doc.type.customer.type']}:" />
				</dt>
				<dd>
					<p:selectOneMenu id="new_doctype_customer_type" value="#{documentTypeCreationDm.newDocTypeCustomerTypeDto}"
						required="true" filter="true" filterMatchMode="startsWith" caseSensitive="false"
						label="#{documentTypeBundle['box.doc.type.customer.type']}">

						<f:selectItem itemValue="" />
						<f:selectItems value="#{documentTypeCreationDm.customerTypes}" var="cs" itemValue="#{cs}" itemLabel="#{cs.name}" />
					</p:selectOneMenu>
				</dd>
			</dl>

			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_button" styleClass="m-blue-text-button" value="#{overallBundle['box.overall.cancel']}"
					action="#{documentTypeCreationDm.cleanCreationParams()}" update="document_type_creation_dlg" process="@this"
					onclick="PF('documentTypeCreationDlgVar').hide()" resetValues="true" />
				<p:commandButton id="create_button" value="#{overallBundle['box.overall.create']}"
					actionListener="#{documentTypeCreationDm.createDocumentType()}"
					update="#{update} new_doctype_name new_doctype_customer_type"
					oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('documentTypeCreationDlgVar').hide()}" />
			</div>
		</p:dialog>
	</h:form>
</ui:composition>