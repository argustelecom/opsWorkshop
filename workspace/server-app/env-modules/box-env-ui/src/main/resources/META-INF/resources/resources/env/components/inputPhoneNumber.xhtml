<ui:component xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions"
              xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
              xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
              xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:sysinf="http://argustelecom.ru/system-inf"
              xmlns:cc="http://java.sun.com/jsf/composite">

    <cc:interface componentType="inputPhoneNumber">
        <cc:attribute name="id" type="java.lang.String"/>
        <cc:attribute name="value" type="java.lang.String"/>
        <cc:attribute name="preferred" type="java.lang.String" shortDescription="Страны, которые будут показаны в шапке списка. Указывать: 'ru, kz'"/>
        <cc:attribute name="onlyCountries" type="java.lang.String" shortDescription="Говорит какие страны должны быть доступны для списка. Перекрывает значение countryUnions"/>
        <cc:attribute name="countryUnions" type="java.util.ArrayList" shortDescription="Страны из каких регионов должны быть доступны для выбора. По умолчанию все страны"/>
        <cc:attribute name="style" type="java.lang.String"/>
        <cc:attribute name="styleClass" type="java.lang.String"/>
    </cc:interface>

    <cc:implementation>

        <h:outputStylesheet name="intl-tel-input/css/intlTelInput.css"/>
        <h:outputScript name="intl-tel-input/js/intlTelInput.min.js" target="head"/>
        <h:outputScript name="intl-tel-input/js/utils.js" target="head"/>

        <f:event type="preRenderComponent" listener="#{cc.init()}"/>

        <p:inputText id="#{cc.attrs.id}" type="tel" label="#{cc.label}" value="#{cc.attrs.value}"
                     styleClass="#{cc.attrs.styleClass} m-pad-left50" style="#{cc.attrs.style}"/>

        <script>
            $("#{cc.fullId}").intlTelInput(
                {
                    utilsScript: "intl-tel-input/js/utils.js",
                    autoPlaceholder: "off",
                    nationalMode: false,
                    preferredCountries: [#{cc.preferredCountries}],
                    onlyCountries: [#{cc.countries}],
                    dropdownContainer: 'body'
                }
            );
        </script>

    </cc:implementation>
</ui:component>
