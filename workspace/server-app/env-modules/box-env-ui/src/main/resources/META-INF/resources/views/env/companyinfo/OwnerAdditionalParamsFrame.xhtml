<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
                xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

    <p:outputPanel id="owner_additional_params">

        <f:event listener="#{ownerAdditionalParameterFm.preRender(ownerId, params)}" type="preRenderComponent"/>

        <h:form id="owner_additional_params_form">
            <div class="m-card m-shadow-effect simple-fb">
                <div class="ui-dashboard-header">
                    <i class="fa fa-tasks" />
                    <h:outputText value="#{companyInfoBundle['box.company_info.additional_params.header']}" />

                    <p:outputPanel id="managed_buttons" styleClass="m-fright">
                        <p:commandLink styleClass="m-mar-left10"
                                       title="#{companyInfoBundle['box.company_info.create_additional.hint']}"
                                       oncomplete="PF('ownerAdditionalParamsEditDlgVar').show()"
                                       disabled="#{!p:ifGranted('System_OwnerEdit')}"
                                       update="owner_additional_params_edit_form">
                            <i class="fa fa-pencil-square-o icon-btn"/>
                            <f:setPropertyActionListener value="#{ownerAdditionalParameterFm.addParameterCallback}"
                                                         target="#{ownerAdditionalParameterEditDm.addParameterCallback}"/>
                        </p:commandLink>
                    </p:outputPanel>
                </div>

                <p:dataTable id="owner_additional_params_table" var="parameter" rowKey="#{parameter.id}"
                             value="#{ownerAdditionalParameterFm.parameters}" emptyMessage="#{overallBundle['box.overall.empty']}">

                    <p:column headerText="#{companyInfoBundle['box.company_info.additional_param.name']}">
                        <h:outputText value="#{parameter.name}" />
                    </p:column>

                    <p:column headerText="#{companyInfoBundle['box.company_info.additional_param.keyword']}">
                        <h:outputText value="#{parameter.keyword}" />
                    </p:column>

                    <p:column headerText="#{companyInfoBundle['box.company_info.additional_param.value']}">
                        <h:outputText value="#{parameter.value}" />
                    </p:column>

                    <p:column styleClass="width-70">
                        <p:commandLink title="#{companyInfoBundle['box.company_info.edit_additional_params.hint']}"
                                       disabled="#{!p:ifGranted('System_OwnerEdit')}"
                                       oncomplete="PF('ownerAdditionalParamsEditDlgVar').show()"
                                       update="owner_additional_params_edit_form">
                            <i class="icon-create fs20 m-bold-gray"/>
                            <f:setPropertyActionListener value="#{parameter}"
                                                         target="#{ownerAdditionalParameterEditDm.parameter}"/>
                        </p:commandLink>

                        <p:commandLink styleClass="m-mar-left10"
                                       update="owner_additional_params_form"
                                       title="#{companyInfoBundle['box.company_info.remove_additional_params.hint']}"
                                       action="#{ownerAdditionalParameterFm.remove(parameter)}"
                                       disabled="#{!p:ifGranted('System_OwnerEdit')}">
                            <i class="fa fa-trash icon-btn"/>
                            <p:confirm header="#{companyInfoBundle['box.company_info.delete_dialog']}"
                                       message="#{companyInfoBundle['box.company_info.delete_dialog.details']}" />
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </div>
        </h:form>
    </p:outputPanel>
</ui:composition>