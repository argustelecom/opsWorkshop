<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">
	<ui:define name="head">
		<h:outputStylesheet name="resources/box-env/styles/box-env.css"/>
		<h:outputStylesheet name="resources/inf/styles/box-functional-block.css"/>
		<h:outputStylesheet name="resources/nri/styles/nri.css"/>
	</ui:define>

	<f:event listener="#{bookPhoneNumberFrameModel.preRender(service, booking)}"
			 type="preRenderComponent"/>

	<div class="m-container-indent">
		<div id="book_pn_info_panel">
			<p:fieldset legend="#{integrationBundle['box.nri.integration.frame.lookup_params_header']}"
						toggleable="true" toggleSpeed="500">
				<dl class="name-value width-250">
					<dt>
						<p:outputLabel for="pn_mask" value="#{integrationBundle['box.nri.integration.frame.lookup_pn_mask']}:"/>
					</dt>
					<dd>
						<p:inputText id="pn_mask" value="#{bookPhoneNumberFrameModel.currentRequirement.pnMask}" />
					</dd>
				</dl>
				<p:outputPanel styleClass="m-fright" style="padding-top: 4px;">
					<p:commandButton value="#{integrationBundle['box.nri.integration.frame.looup_word']}"
									 update="resource_to_book_pnl"
									 action="#{bookPhoneNumberFrameModel.find}">
					</p:commandButton>
				</p:outputPanel>
			</p:fieldset>

			<p:outputPanel id="resource_to_book_pnl" styleClass="no_border_panel">
				<p:pickList id="pickList" styleClass="width-100-percents" style="padding-top: 5px;"
							rendered="#{fn:length(bookPhoneNumberFrameModel.availableResources.source) > 0
                                        or fn:length(bookPhoneNumberFrameModel.availableResources.target) > 0}"
							value="#{bookPhoneNumberFrameModel.availableResources}" var="pn"
							itemLabel="#{pn.name}" itemValue="#{pn}" converter="pickListDataConverter"
							showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
					<p:ajax event="transfer" update="booking_btn_pnl"/>
					<f:facet name="sourceCaption">#{integrationBundle['box.nri.integration.frame.found_word']}</f:facet>
					<f:facet name="targetCaption">#{integrationBundle['box.nri.integration.frame.booked_word']}</f:facet>
				</p:pickList>
				<p:outputPanel id="booking_btn_pnl" styleClass="m-fright" style="padding-top: 4px;">
					<p:commandButton value="#{integrationBundle['box.nri.integration.frame.book_word']}"
									 update="booking_information_accordion"
									 process="@this"
									 rendered="#{fn:length(bookPhoneNumberFrameModel.availableResources.target) > 0}"
									 action="#{bookPhoneNumberFrameModel.book}">
					</p:commandButton>
				</p:outputPanel>
			</p:outputPanel>
		</div>
	</div>
</ui:composition>