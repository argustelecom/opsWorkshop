<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core">

	<!--@elvariable id="element" type="ru.argustelecom.box.nri.building.BuildingElementDto"-->
	<f:event listener="#{buildingResInstallationFM.preRender(element)}" type="preRenderComponent"/>

	<f:loadBundle basename="BuildingElementBundle" var="buildingElementBundle"/>

	<p:outputPanel styleClass="m-container100"
				   rendered="#{not empty buildingResInstallationFM.installedResources or (buildingResInstallationFM.element.isRoot and not empty buildingResInstallationFM.allInstalledResources)}">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect simple-fb">

				<div class="ui-dashboard-header">
					<i class="fa fa-plug"/>
					<h:outputText styleClass="card-header" value="#{buildingElementBundle['box.nri.building.installed_resources']}"/>
				</div>

				<p:accordionPanel multiple="true">

					<p:tab id="res_on_this" rendered="#{not empty buildingResInstallationFM.installedResources}"
						   title="#{buildingElementBundle['box.nri.building.installed_resources_on_this']}">
						<p:dataTable value="#{buildingResInstallationFM.installedResources}" var="resInstallation"
									 rowKey="#{resInstallation.id}" scrollable="true" selectionMode="single"
									 selection="#{buildingResInstallationFM.selectedInstallation}">
							<p:ajax event="rowSelect"
									listener="#{buildingResInstallationFM.installedResourcesRowSelect}"/>

							<p:column headerText="#{buildingElementBundle['box.nri.building.resource_name']}">
								<a href="ResourceInstallationView.xhtml?installation=ResourceInstallation-#{resInstallation.id}"
								   style="text-decoration: none !important; color: #455a64 !important;"
								   class="link-in-table-cell">
									<p:row>
										<h:outputText value="#{resInstallation.resource.name}"/>
									</p:row>
								</a>
							</p:column>

							<p:column headerText="#{buildingElementBundle['box.nri.building.status']}">
								<a href="ResourceInstallationView.xhtml?installation=ResourceInstallation-#{resInstallation.id}"
								   style="text-decoration: none !important; color: #455a64 !important;"
								   class="link-in-table-cell">
									<p:row>
										<h:outputText value="#{resInstallation.resource.status.name}"/>
									</p:row>
								</a>
							</p:column>
						</p:dataTable>
					</p:tab>

					<p:tab id="res_on_parent"
						   title="#{buildingElementBundle['box.nri.building.installed_resources_on_root']}"
						   rendered="#{element.isRoot}">
						<p:dataTable value="#{buildingResInstallationFM.allInstalledResources}" var="resInstallation"
									 rowKey="#{resInstallation.id}" scrollable="true" selectionMode="single"
									 selection="#{buildingResInstallationFM.selectedInstallation}">
							<p:ajax event="rowSelect"
									listener="#{buildingResInstallationFM.installedResourcesRowSelect}"/>

							<p:column headerText="#{buildingElementBundle['box.nri.building.resource_name']}">
								<a href="ResourceInstallationView.xhtml?installation=ResourceInstallation-#{resInstallation.id}"
								   style="text-decoration: none !important; color: #455a64 !important;"
								   class="link-in-table-cell">
									<p:row>
										<h:outputText value="#{resInstallation.resource.name}"/>
									</p:row>
								</a>
							</p:column>

							<p:column headerText="#{buildingElementBundle['box.nri.building.status']}">
								<a href="ResourceInstallationView.xhtml?installation=ResourceInstallation-#{resInstallation.id}"
								   style="text-decoration: none !important; color: #455a64 !important;"
								   class="link-in-table-cell">
									<p:row>
										<h:outputText value="#{resInstallation.resource.status.name}"/>
									</p:row>
								</a>
							</p:column>

							<p:column headerText="#{buildingElementBundle['box.nri.building.installed']}">
								<a href="BuildingStructureView.xhtml?location=&amp;buildingElement=BuildingElement-#{resInstallation.installedAt.id}"
								   class="link-in-table-cell">
									<p:row>
										<h:outputText value="#{resInstallation.installedAt.name}"/>
									</p:row>
								</a>
							</p:column>

						</p:dataTable>
					</p:tab>
				</p:accordionPanel>
			</div>
		</div>
	</p:outputPanel>

	<p:outputPanel styleClass="m-container100" rendered="#{not empty buildingResInstallationFM.cover}">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect simple-fb">

				<div class="ui-dashboard-header">
					<p:outputLabel styleClass="coverage-area-image"/>
					<h:outputText styleClass="card-header" value="#{buildingElementBundle['box.nri.building.coverage_area']}"/>
				</div>

				<p:dataTable value="#{buildingResInstallationFM.cover}" var="resInstallation"
							 rowKey="#{resInstallation.id}" selectionMode="single"
							 selection="#{buildingResInstallationFM.selectedInstallation}">
					<p:ajax event="rowSelect" listener="#{buildingResInstallationFM.installedResourcesRowSelect}"/>

					<p:column headerText="#{buildingElementBundle['box.nri.building.resource_name']}">
						<a href="ResourceInstallationView.xhtml?installation=ResourceInstallation-#{resInstallation.id}"
						   style="text-decoration: none !important; color: #455a64 !important;"
						   class="link-in-table-cell">
							<p:row>
								<h:outputText value="#{resInstallation.resource.name}"/>
							</p:row>
						</a>
					</p:column>

					<p:column headerText="#{buildingElementBundle['box.nri.building.status']}">
						<a href="ResourceInstallationView.xhtml?installation=ResourceInstallation-#{resInstallation.id}"
						   style="text-decoration: none !important; color: #455a64 !important;"
						   class="link-in-table-cell">
							<p:row>
								<h:outputText value="#{resInstallation.resource.status.name}"/>
							</p:row>
						</a>
					</p:column>
				</p:dataTable>
			</div>
		</div>
	</p:outputPanel>
</ui:composition>