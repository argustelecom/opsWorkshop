<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:boxenv="http://argustelecom.ru/box/env">

	<f:loadBundle var="mediationBundle" basename="MediationBundle"/>
	<f:loadBundle var="tariffBundle" basename="TariffBundle"/>


	<h:form id="unsuitable_calls_edit_form">
		<p:dialog id="unsuitable_calls_edit_dlg" header="#{mediationBundle['box.mediation.converter.dialog.edit.header']}" width="550"
				  widgetVar="unsuitableCallsEditVar" resizable="false" modal="true" closable="false" dynamic="true" styleClass="icon-creation">

			<o:importConstants type="ru.argustelecom.box.env.mediation.UnsuitableCallsListViewModel.UnsuitableCallsContext" var="UnsuitableCallsContext"/>
			<o:importConstants type="ru.argustelecom.box.env.mediation.model.ReleaseCode" var="ReleaseCode"/>
			<dl class="name-value width-200">

				<dt>
					<p:outputLabel for="call_id" value="#{mediationBundle['box.mediation.converter.call_id']}: "/>
				</dt>
				<dd>
					<h:outputText id="call_id"
								  value="#{unsuitableCallsEditDm.unsuitableCall.callId}"
								  label="#{mediationBundle['box.mediation.converter.call_id']}" styleClass="m-mar-right10"/>
				</dd>

				<dt>
					<p:outputLabel for="foreign_id" value="#{mediationBundle['box.mediation.converter.foreign_id']}: "/>
				</dt>
				<dd>
					<h:outputText id="foreign_id"
								  value="#{unsuitableCallsEditDm.unsuitableCall.foreignId}"
								  label="#{mediationBundle['box.mediation.converter.foreign_id']}" styleClass="m-mar-right10"/>
				</dd>

				<dt>
					<p:outputLabel for="time" value="#{mediationBundle['box.mediation.converter.time']}:"/>
				</dt>
				<dd>
					<p:calendar id="time" value="#{unsuitableCallsEditDm.unsuitableCall.callDate}"
								pattern="#{dateUtils.DATETIME_WITH_SECONDS_PATTERN}"
								locale="#{languageBean.locale.language}" styleClass="width-100-percents"
								label="#{mediationBundle['box.mediation.converter.time']}">
					</p:calendar>

				</dd>

				<dt>
					<p:outputLabel for="duration" value="#{mediationBundle['box.mediation.converter.duration']}:"/>
				</dt>
				<dd>
					<p:inputText id="duration" value="#{unsuitableCallsEditDm.unsuitableCall.duration}" styleClass="width-20-percents m-mar-right30"
								 label="#{mediationBundle['box.mediation.converter.duration']}" />

					<p:selectOneMenu id="new_rated_unit" styleClass="width-70-percents"
									 value="#{unsuitableCallsEditDm.unsuitableCall.cdrUnit}"
									 label="#{tariffBundle['box.telephony.tariff.rated_unit']}">

						<f:selectItem itemValue="#{null}"/>
						<f:selectItems value="#{unsuitableCallsEditDm.getPossibleRatedUnits()}" var="ratedUnit"
									   itemLabel="#{ratedUnit.getName()}" itemValue="#{ratedUnit}"/>
					</p:selectOneMenu>
				</dd>

				<dt>
					<p:outputLabel for="outgoing_resource" value="#{mediationBundle['box.mediation.converter.outgoing_resource']}:"/>
				</dt>
				<dd>
					<p:inputText id="outgoing_resource" value="#{unsuitableCallsEditDm.unsuitableCall.callingNumber}" label="#{mediationBundle['box.mediation.converter.outgoing_resource']}"/>
				</dd>

				<dt>
					<p:outputLabel for="outgoing_channel" value="#{mediationBundle['box.mediation.converter.outgoing_channel']}:"/>
				</dt>
				<dd>
					<p:inputText id="outgoing_channel" value="#{unsuitableCallsEditDm.unsuitableCall.outgoingChannel}" label="#{mediationBundle['box.mediation.converter.outgoing_channel']}"/>
				</dd>

				<ui:fragment rendered="#{unsuitableCallsEditDm.context.equals(UnsuitableCallsContext.ANALYSIS)}">
					<dt>
						<p:outputLabel for="outgoing_trunk" value="#{mediationBundle['box.mediation.converter.outgoing_trunk']}:"/>
					</dt>
					<dd>
						<p:inputText id="outgoing_trunk" value="#{unsuitableCallsEditDm.unsuitableCall.outgoingTrunk}" label="#{mediationBundle['box.mediation.converter.outgoing_trunk']}"/>
					</dd>
				</ui:fragment>

				<dt>
					<p:outputLabel for="incoming_resource" value="#{mediationBundle['box.mediation.converter.incoming_resource']}:"/>
				</dt>
				<dd>
					<p:inputText id="incoming_resource" value="#{unsuitableCallsEditDm.unsuitableCall.calledNumber}" label="#{mediationBundle['box.mediation.converter.incoming_resource']}"/>
				</dd>

				<dt>
					<p:outputLabel for="incoming_channel" value="#{mediationBundle['box.mediation.converter.incoming_channel']}:"/>
				</dt>
				<dd>
					<p:inputText id="incoming_channel" value="#{unsuitableCallsEditDm.unsuitableCall.incomingChannel}" label="#{mediationBundle['box.mediation.converter.incoming_channel']}"/>
				</dd>

				<dt>
					<p:outputLabel for="incoming_trunk" value="#{mediationBundle['box.mediation.converter.incoming_trunk']}:"/>
				</dt>
				<dd>
					<p:inputText id="incoming_trunk" value="#{unsuitableCallsEditDm.unsuitableCall.incomingTrunk}" label="#{mediationBundle['box.mediation.converter.incoming_trunk']}"/>
				</dd>

				<dt>
					<p:outputLabel for="end_cause" value="#{mediationBundle['box.mediation.converter.end_cause']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="end_cause" styleClass="width-70-percents"
									 value="#{unsuitableCallsEditDm.unsuitableCall.releaseCode}"
									 label="#{mediationBundle['box.mediation.converter.end_cause']}">

						<f:selectItem itemValue="#{null}"/>
						<f:selectItems value="#{ReleaseCode.values()}" var="code"
									   itemLabel="#{code.getName()}" itemValue="#{code}"/>
					</p:selectOneMenu>
				</dd>

				<ui:fragment rendered="#{unsuitableCallsEditDm.context.equals(UnsuitableCallsContext.ANALYSIS)}">
					<dt>
						<p:outputLabel for="direction" value="#{mediationBundle['box.mediation.analysis.direction']}:"/>
					</dt>
					<dd>
						<p:inputText id="direction" value="#{unsuitableCallsEditDm.unsuitableCall.callDirection}" label="#{mediationBundle['box.mediation.analysis.direction']}"/>
					</dd>
				</ui:fragment>

			</dl>


			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_button" value="#{overallBundle['box.overall.cancel']}"
								 styleClass="m-blue-text-button" update="unsuitable_calls_edit_dlg"
								 process="@this" onclick="PF('unsuitableCallsEditVar').hide()"/>
				<p:commandButton id="create_button" value="#{overallBundle['box.overall.save']}"
								 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('unsuitableCallsEditVar').hide()}"
								 action="#{unsuitableCallsEditDm.change()}"
								 update="#{update} unsuitable_calls_edit_dlg"/>
			</div>
		</p:dialog>
	</h:form>
</ui:composition>