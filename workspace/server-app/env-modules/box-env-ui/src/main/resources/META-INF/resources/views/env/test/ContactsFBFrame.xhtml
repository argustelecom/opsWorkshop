<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">
	
	<f:loadBundle basename="ContactBundle" var="contactBundle"/>
	<f:loadBundle basename="PersonnelBundle" var="personnelBundle"/>
	
	<div class="m-card m-shadow-effect custom-content-card simple-fb">
	<h:form id="contact_fb_form">
		<div class="ui-dashboard-header">
			<ui:insert name="fbHeader">
				<i class="icon-contact_phone" />
				<h:outputText styleClass="card-header" value="#{contactBundle['box.contact.plural']}" />
				<div class="m-fright">
					<p:commandButton icon="fa fa-plus" title="#{personnelBundle['box.personnel.contact.add']}" onclick="PF('contactCreationDlg').show()" process="@this" />
				</div>
			</ui:insert>
		</div>
		
		<p:dataScroller value="#{contactsFBModel.contactCards}" var="contactCard" chunkSize="10" mode="inline" scrollHeight="300">
			<div class="m-card m-shadow-effect">
				<div class="ui-dashboard-header">
					<div class="m-fleft">
					<sysinf:editableSection disabled="false" styleClass="width-300"
											saveLabel="#{overallBundle['box.overall.save']}"
											cancelLabel="#{overallBundle['box.overall.cancel']}">
						<p:inputText value="#{contactCard.contactName}" />
					</sysinf:editableSection>
					</div>
						
						
					<div class="m-fright">
						<p:commandButton icon="fa fa-remove red" title="#{personnelBundle['box.personnel.contact.delete']}" action="#{contactCard.removeContact(contact)}"
										 process="@this" styleClass="remove-card-btn">
							<p:confirm header="#{contactBundle['box.contact.delete_dialog']}"
									message="#{contactBundle['box.contact.delete_dialog.details']}" />
						</p:commandButton>
					</div>
					
					<div style="clear: both;" />
				</div>
				
				<p:dataTable id="contacts" value="#{contactCard.contacts}" var="contact" styleClass="contact-info"
					editable="true" rowKey="#{contact.id}">
					<p:column styleClass="contact-value with-remove-btn">
						<p:cellEditor>
               				<f:facet name="output"><i class="#{contact.type.category.icon} fs20" /> <h:outputText value="#{contact.value}" /></f:facet>
               				<f:facet name="input">
           						<i class="#{contact.type.category.icon} fs20" />
               					<p:inputText value="#{contact.value}" label="#{contactBundle[box.contact.contact_label]}" />
               				</f:facet>
           				</p:cellEditor>
					</p:column>
					
					<p:column styleClass="width-20 action-column">
						<p:commandButton icon="fa fa-trash-o" title="#{overallBundle['box.ovrarall.delete']}"
										 action="#{contactCard.removeContact(contact)}"
							process="@this" styleClass="trash-btn" />
					</p:column>
					
					<p:column>
						<p:cellEditor>
               				<f:facet name="output"><h:outputText value="#{overallBundle['box.overall.comment']}" /></f:facet>
               				<f:facet name="input"><p:inputText value="" /></f:facet>
           				</p:cellEditor>
					</p:column>
				</p:dataTable>
				
				<p:commandButton icon="fa fa-plus" title="#{contactBundle['box.contact.add_contact']}" action="#{addContactDlgModel.open(contactCard.party)}"
						process="@this" styleClass="m-grey-button add-contact-btn" />
			</div> 
    	</p:dataScroller>
    </h:form>
	</div>		
	
	<!-- <ui:include src="ContactInfoCreationDialog.xhtml" />
	
	<ui:include src="AddContactDialog.xhtml">
		<ui:param name="addContactDlgModel" value="#{addContactDlgModel}"/>
	</ui:include> -->
</ui:composition>