<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
                xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:boxenv="http://argustelecom.ru/box/env">

    <f:loadBundle basename="SaldoExportBundle" var="saldoExportBundle"/>

    <div class="m-container-indent">
        <div class="m-card m-shadow-effect simple-fb">
            <h:form id="saldo_export_settings_form">

                <div class="ui-dashboard-header">
                    <i class="fa fa-sliders" />
                    <h:outputText styleClass="card-header" value="#{saldoExportBundle['box.saldo.export.param']}"/>
                    <h:outputText  id="settingsttp" class="icon-help_outline tooltip-help-15" position="top"
                                   title="#{saldoExportBundle['box.saldo.export.param.hint']}"/>
                    <p:tooltip id="saldo_sett_ttp" for="settingsttp" />
                    <p:outputPanel id="settings_button" styleClass="m-fright">
                        <p:commandLink action="#{saldoExportVM.startExport()}" title="#{saldoExportBundle['box.saldo.export.param.start.hint']}" process="@this"
                                       rendered="#{not saldoExportVM.param.working and p:ifGranted('Billing_SaldoExportEdit')}" update="settings_button history_form">
                            <i class="fa fa-play-circle-o icon-btn"></i>
                        </p:commandLink>
                        <p:commandLink action="#{saldoExportVM.stopExport()}" title="#{saldoExportBundle['box.saldo.export.param.shutdown.hint']}" process="@this"
                                       rendered="#{saldoExportVM.param.working and p:ifGranted('Billing_SaldoExportEdit')}" update="settings_button history_form">
                            <i class="fa fa-stop-circle-o icon-btn"></i>
                        </p:commandLink>
						<p:commandLink oncomplete="PF('saldoExportSettingsDlg').show()" styleClass="m-mar-left10"
                                       title="#{saldoExportBundle['box.saldo.export.param.edit.hint']}" process="@this" update="saldo_export_settings_panel"
                                       rendered="#{p:ifGranted('Billing_SaldoExportEdit')}">
							<f:setPropertyActionListener value="#{saldoExportVM.param}" target="#{saldoExportParamEditDM.param}"/>
							<f:setPropertyActionListener value="#{saldoExportVM.callback}" target="#{saldoExportParamEditDM.callback}"/>
                            <i class="icon-settings icon-btn" />
                        </p:commandLink>
                    </p:outputPanel>
                </div>
                <p:outputPanel id="saldo_export_settings_panel">
                    <dl class="name-value width-350">
                        <dt>
                            <p:outputLabel for="period_export" value="#{saldoExportBundle['box.saldo.export.period']}"/>
                        </dt>
                        <dd>
                            <p:outputLabel id="period_export" value="#{saldoExportVM.param.periodUnit.toString()}"/>
                        </dd>
                        <dt>
                            <p:outputLabel for="period_start" value="#{saldoExportBundle['box.saldo.export.param.period.start']}"/>
                        </dt>
                        <dd>
                            <p:outputLabel id="period_start" value="#{saldoExportVM.param.calculationType.name}"/>
                        </dd>
                        <dt>
                            <p:outputLabel for="time_start" value="#{saldoExportBundle['box.saldo.export.param.period.start.time']}"/>
                        </dt>
                        <dd>
                            <p:outputLabel id="time_start" value="#{saldoExportVM.param.executeTime}">
								<sysinf:convertDateTime pattern="#{dateUtils.TIME_DEFAULT_PATTERN}"/>
							</p:outputLabel>
                        </dd>
                    </dl>
                </p:outputPanel>
            </h:form>
        </div>
    </div>

</ui:composition>