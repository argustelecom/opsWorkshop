<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
			  xmlns:f="http://xmlns.jcp.org/jsf/core"
			  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
			  xmlns:p="http://primefaces.org/ui"
			  xmlns:sysinf="http://argustelecom.ru/system-inf">

	<f:loadBundle var="saldoImportBundle" basename="SaldoImportBundle"/>
	<div class="m-container100 m-responsive100">

		<div class="m-mar-top5">

			<div class="m-card m-shadow-effect custom-content-card simple-fb">

				<div class="ui-dashboard-header">
					<i class="icon-create"/>
					<h:outputText styleClass="card-header"
								  value="#{saldoImportBundle['box.saldo.import.step.edit.correction']}"/>
				</div>

				<h3 class="h3-header">#{saldoImportBundle['box.saldo.import.step.edit.docs']}</h3>
				<p:outputPanel id="aggregate_info_panel" style="min-height: 100px;">
					<div class="columns">
						<div class="column width-30-percents m-pad-left20">
							<ui:fragment rendered="true">
								<dl class="name-value width-230">
									<dt>
										<p:outputLabel for="suitable_count"
													   value="#{saldoImportBundle['box.saldo.import.step.edit.ready']}:"/>
									</dt>
									<dd>
										<p:outputLabel id="suitable_count" value="#{registerImportVM.register.suitableItems.size()}" styleClass="m-green"/>
									</dd>

									<dt>
										<p:outputLabel for="not_suitable_count"	value="#{saldoImportBundle['box.saldo.import.step.edit.unable']}:"/>
									</dt>
									<dd>
										<p:outputLabel id="not_suitable_count" value="#{registerImportVM.notSuitableItems.size()}" styleClass="m-red"/>
									</dd>
								</dl>
							</ui:fragment>
						</div>

						<div class="column width-65-percents">
							<ui:fragment rendered="true">
								<dl class="name-value width-250">
									<dt>
										<p:outputLabel for="register_sum"
													   value="#{saldoImportBundle['box.saldo.import.step.edit.amount.declared']}:"/>
									</dt>
									<dd>
										<h:outputText id="register_sum" value="#{registerImportVM.register.sum}"/>
									</dd>
									<dt>
										<p:outputLabel for="process_sum"
													   value="#{saldoImportBundle['box.saldo.import.step.edit.amount.actual']}:"/>
									</dt>
									<dd>
										<h:outputText id="process_sum" value="#{registerImportVM.register.sumOfSuitableItems}"/>
									</dd>
								</dl>
							</ui:fragment>
						</div>
					</div>

					<p class="attention-box warn">
						#{saldoImportBundle['box.saldo.import.step.edit.msg']}
					</p>
				</p:outputPanel>

				<h3 class="h3-header">#{saldoImportBundle['box.saldo.import.step.edit.data']}
					<h:outputText id="edit_data_lable" class="icon-help_outline tooltip-help-3" position="top"
								  title=""/>
					<p:tooltip id="edit_data_lable_ttp" for="edit_data_lable"/>
				</h3>

				<div class="margin-16px">

					<p:dataTable id="saldo_register_correction_table" value="#{registerImportVM.notSuitableItems}" var="item" paginator="true"
                                 rowsPerPageTemplate="5,10,15" rows="5"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 emptyMessage="#{overallBundle['box.overall.empty']}" currentPageReportTemplate="{startRecord} - {endRecord} #{overallBundle['box.overall.from']} {totalRecords}"
                                 styleClass="paginator-top-hidden">
						<p:column headerText="#{saldoImportBundle['box.saldo.import.step.edit.problem']}">
							<h:outputText value="#{item.error}"/>
						</p:column>
						<p:column headerText="#{saldoImportBundle['box.saldo.import.step.edit.personal_account']}">
							<h:outputText value="#{item.value.accountNumber}"/>
						</p:column>
						<p:column headerText="#{saldoImportBundle['box.saldo.import.step.edit.amount']}">
							<h:outputText value="#{item.value.sum}"/>
						</p:column>
						<p:column headerText="#{saldoImportBundle['box.saldo.import.step.edit.doc']}">
							<h:outputText value="#{item.value.paymentDocNumber}"/>
						</p:column>
						<p:column headerText="#{saldoImportBundle['box.saldo.import.step.edit.payment.date']}">
							<h:outputText id="date_pay" value="#{item.value.paymentDocDate}" disabled="true">
								<sysinf:convertDateTime pattern="#{dateUtils.DATETIME_WITH_SECONDS_PATTERN}"/>
							</h:outputText>
						</p:column>

						<p:column styleClass="width-24" rendered="#{p:ifGranted('Billing_PaymentDocEdit')}">
							<p:commandLink styleClass="ui-row-editor" action="#{registerImportEditDM.onDialogOpen()}">
								<f:setPropertyActionListener value="#{registerImportVM.editCallback}" target="#{registerImportEditDM.editCallback}"/>
								<f:setPropertyActionListener value="#{item}" target="#{registerImportEditDM.editableItemAdapter}"/>
								<i class="fa fa-pencil-square-o icon-btn"/>
							</p:commandLink>
						</p:column>

					</p:dataTable>

				</div>

			</div>

		</div>

	</div>

</ui:composition>