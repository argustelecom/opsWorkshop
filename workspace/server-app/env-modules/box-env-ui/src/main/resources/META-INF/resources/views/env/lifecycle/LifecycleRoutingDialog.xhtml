<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
	xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:boxenv="http://argustelecom.ru/box/env">

	<f:loadBundle var="lifecycleBundle" basename="LifecycleBundle"/>
	<h:form id="lifecycle_routing_dlg_form">

		<p:dialog id="lifecycle_routing_dlg" header="#{lifecycleBundle['box.lc.route_dialog']}" width="750" styleClass="icon-creation"
			widgetVar="lifecycleRoutingDlgVar" resizable="false" modal="true" closable="false" dynamic="true">
			
			<p:outputPanel id="lifecycle_routing_dlg_content">
			
				<ui:fragment rendered="#{lifecycleRoutingDlg.renderVariablesFrame}">
					<ui:insert name="extension"/>
	
					<ui:insert name="variables">
						<ui:fragment rendered="#{lifecycleRoutingDlg.hasVariables()}">
							<ui:include src="/views/env/type/GroupTypePropertyValueFrame.xhtml">
								<ui:param name="instance" value="#{lifecycleRoutingDlg.variablesHolder}" />
							</ui:include>
						</ui:fragment>
					</ui:insert>
				</ui:fragment>
	
				<ui:fragment rendered="#{lifecycleRoutingDlg.renderValidationFrame}">
					<ui:insert name="warnings">
						<div class="messages-container">
							<ul>
								<ui:repeat id="validation_issue" value="#{lifecycleRoutingDlg.validationIssues}" var="issue">
									<li>
                                        <div class="message-icon #{lifecycleRoutingDlg.determineMessageStyle(issue.kind)}">
                                             <p>
												 <span class="m-font-roboto-medium">
													 #{lifecycleRoutingDlg.getIssueKindTitle(issue.kind)}!
												 </span> #{issue.message}
											 </p>
                                        </div>
									</li>
								</ui:repeat>
							</ul>
						</div>

						<div class="m-mar-top10">
							<h:outputText value="#{lifecycleBundle['box.lc.acquainted']}: " for="ignore_warnings"
										  styleClass="m-disp-inl-block m-vertical-top m-mar-top5 m-mar-right8"
										  rendered="#{lifecycleRoutingDlg.renderIgnoreWarningsCheckbox}" />
							<p:selectBooleanCheckbox id="ignore_warnings"
								value="#{lifecycleRoutingDlg.ignoreWarnings}"
								rendered="#{lifecycleRoutingDlg.renderIgnoreWarningsCheckbox}">
								<p:ajax update="commit_routing" />
							</p:selectBooleanCheckbox>
						</div>
					</ui:insert>
				</ui:fragment>
	
				<div class="dialog-footer-buttons">
					<p:commandButton id="cancel_routing" styleClass="m-blue-text-button"
						value="#{overallBundle['box.overall.cancel']}"
						action="#{lifecycleRoutingDlg.onCancelRoute()}"
						process="@this" onclick="PF('lifecycleRoutingDlgVar').hide()" 
						update="#{update}" />
		
					<p:commandButton id="back_to_variables"
						rendered="#{lifecycleRoutingDlg.renderBackToVariablesButton}"
						value="#{overallBundle['box.overall.back']}"
						action="#{lifecycleRoutingDlg.onBackToVariables()}"
						update="lifecycle_routing_dlg_content" />	
		
					<p:commandButton id="commit_routing" 
						disabled="#{lifecycleRoutingDlg.commitRouteButtonDisabled}"
						value="#{lifecycleRoutingDlg.routeName}"
						action="#{lifecycleRoutingDlg.onCommitRoute()}" 
						update="lifecycle_routing_dlg_content #{update} "/>
				</div>
			
			</p:outputPanel>
		</p:dialog>
	</h:form>
</ui:composition>