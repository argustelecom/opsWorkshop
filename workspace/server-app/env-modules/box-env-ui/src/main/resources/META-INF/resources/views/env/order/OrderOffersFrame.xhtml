<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core"
				xmlns:boxenv="http://argustelecom.ru/box/env">

	<div class="#{containerClass eq null ? 'm-container50' : containerClass} m-responsive100">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect custom-content-card simple-fb order-offers">
				<h:form id="order_offers_form">

					<o:importConstants type="ru.argustelecom.box.env.order.lifecycle.OrderLifecycle.Behaviors" var="behavior"/>

					<div class="ui-dashboard-header">
						<i class="fa fa-check-square"/>
						<h:outputText styleClass="card-header" value="#{orderBundle['box.order.offer.chosen']}"/>

						<p:outputPanel styleClass="m-fright">
							<p:commandLink id="add_requirement" styleClass="m-mar-left10" action="#{orderOffersFrameModel.onSelectOfferDialogOpen()}"
											onclick="PF('orderSelectOffersDlgVar').show()"
										   title="#{overallBundle['box.overall.add']}"
											rendered="#{not empty orderOffersFrameModel.order.unmodifiableRequirements
													 and !behaviorUtils.isForbidden(orderOffersFrameModel.order, behavior.addOffer)}"
											disabled="#{!p:ifGranted('CRM_OrderEdit')}">
											<i class="fa fa-edit icon-btn"/>
							</p:commandLink>
						</p:outputPanel>
					</div>

					<p:dataScroller var="offer" chunkSize="10" mode="inline" scrollHeight="300"
									value="#{orderOffersFrameModel.order.unmodifiableOffers}">
						<div class="m-card m-shadow-effect">
							<div class="ui-dashboard-header">
								<o:importConstants type="ru.argustelecom.box.env.pricing.model.PricelistState" var="pricelistState"/>
								<h:outputText value="#{offer.objectName}"  styleClass="card-header fs16 #{not (offer.pricelist.state eq pricelistState.INFORCE) ? 'm-red' : ''}"/>

								<div class="m-fright">
									<span class="columns">
										<boxenv:money value="#{offer.price}" unicolour="true" size="fs18" styleClass="column"/>
										<p:commandButton icon="fa fa-remove red" action="#{orderOffersFrameModel.removeOffer(offer)}"
														 process="@this" styleClass="column remove-card-btn" update="order_offers_form"
														 rendered="#{!behaviorUtils.isForbidden(orderOffersFrameModel.order, behavior.addOffer)}"
														 disabled="#{!p:ifGranted('CRM_OrderEdit')}">
											<p:confirm header="#{orderBundle['box.order.offer.delete_dialog']}"
													   message="#{orderBundle['box.order.offer.delete_dialog.details']} '#{offer.objectName}'"/>
										</p:commandButton>
									</span>
								</div>
							</div>

							<ui:include src="/views/env/product/ProductTypeInfoFrame.xhtml">
								<ui:param name="compositeProductType" value="#{offer.isComposite()}"/>
								<ui:param name="type" value="#{offer.productType}"/>
							</ui:include>

						</div>
					</p:dataScroller>

				</h:form>
			</div>
		</div>
	</div>

</ui:composition>