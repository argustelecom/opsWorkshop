<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
                xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

    <f:loadBundle var="provisionTermsBundle" basename="ProvisionTermsBundle"/>
    <div class="m-container100">
        <div class="m-container-indent">
            <div class="m-card m-shadow-effect">
                <h:form id="provision_terms_attributes_form">

                    <div class="columns">
                        <div class="column m-pad-0">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank m-tex-al-center column-id">
                                <i class="fa fa-server fs60"/>
                                <h:outputText value="#{overallBundle['box.overall.id']} #{terms.id}"/>
                            </p:panelGrid>
                        </div>

                        <div class="column width-100-percents">
                            <div class=" m-pos-relative">
                                <div class="hover-overlay-block">
                                    <sysinf:editableSection disabled="#{!p:ifGranted('ProductManagment_ProvidingTermsEdit') or terms eq null or sysinf:isEntity(provisionTermsDirectoryVM.terms, 'NonRecurrentTerms')}"
                                                            saveLabel="#{overallBundle['box.overall.save']}"
                                                            cancelLabel="#{overallBundle['box.overall.cancel']}">

                                        <p:ajax event="save" update="#{update}"/>

                                        <p:outputPanel rendered="#{terms ne null}">
                                            <dl class="name-value width-100">
                                                <dt>
                                                    <p:outputLabel for="name" value="#{overallBundle['box.overall.name']}:"/>
                                                </dt>
                                                <dd>
                                                    <p:inputText id="name" value="#{terms.objectName}" required="true"
                                                                 maxlength="64" label="#{overallBundle['box.overall.name']}"/>
                                                </dd>
                                            </dl>
                                        </p:outputPanel>

                                        <p:outputPanel rendered="#{terms ne null}">
                                            <dl class="name-value width-100">
                                                <dt>
                                                    <p:outputLabel for="description" value="#{overallBundle['box.overall.desc']}:"/>
                                                </dt>
                                                <dd class="auto-height min-height62">
                                                    <p:inputTextarea id="description" value="#{terms.description}" maxlength="512"
                                                                     rows="3" counter="description_counter"
                                                                     counterTemplate="#{overallBundle['box.overall.chars_left']}"/>
                                                    <h:outputText id="description_counter" styleClass="fs12"/>
                                                </dd>
                                            </dl>
                                        </p:outputPanel>

                                    </sysinf:editableSection>
                                </div>
                            </div>
                        </div>

                        <o:importConstants type="ru.argustelecom.box.env.billing.provision.model.RecurrentTermsState" var="rtState"/>

                        <ui:fragment rendered="#{provisionTermsDirectoryVM.terms.recurrent}">
                            <div class="column m-tex-al-right m-pad-0">
                                <div class="width-180">
                                    <ui:include src="/views/env/lifecycle/LifecycleFrame.xhtml">
                                        <ui:param name="businessObject"
                                                  value="#{(provisionTermsDirectoryVM.terms.recurrent) ? provisionTermsDirectoryVM.terms : null}"/>
                                        <ui:param name="update" value="provision_terms_attributes_form provision_terms_tree_form"/>
                                        <ui:param name="styleClass" value="splitbutton-width-142 m-mar-bot10"/>
                                        <ui:param name="readonly" value="#{!p:ifGranted('ProductManagment_ProvidingTermsEdit')}"/>
                                    </ui:include>
                                </div>
                            </div>
                        </ui:fragment>
                    </div>

                </h:form>
            </div>
        </div>
    </div>

</ui:composition>