<ui:composition template="/views/env/filter/ListFrame.xhtml" xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:p="http://primefaces.org/ui">

	<ui:define name="completeFilterFields">
		<ul class="search-row-2-column">
			<li>
				<p:outputLabel value="#{phoneNumbersBundle['box.nri.phones.number_label']}:"/>
				<p:inputText value="#{phoneNumbersViewState.digits}" process="@this" maxlength="64"
						alt="#{phoneNumbersBundle['box.nri.phones.input_limited_only_digits']}">
					<pe:keyFilter regEx="/[\d]/"></pe:keyFilter>
				</p:inputText>
			</li>
			<li>
				<p:outputLabel styleClass="width-100" value="#{phoneNumbersBundle['box.nri.phones.state_label']}:"/>
				<p:selectOneMenu value="#{phoneNumbersViewState.state}">
					<f:selectItem itemValue="#{null}" itemLabel="" noSelectionOption="true"/>
					<f:selectItems value="#{phoneNumbersVM.states}" var="state" itemLabel="#{state.name}"/>
				</p:selectOneMenu>
			</li>
		</ul>
		<ul class="search-row-2-column">
			<li>
				<p:outputLabel value="#{phoneNumbersBundle['box.nri.phones.pool_label']}:"/>
				<p:selectOneMenu value="#{phoneNumbersViewState.pool}">
					<f:selectItem itemValue="#{null}" itemLabel="" noSelectionOption="true"/>
					<f:selectItems value="#{phoneNumbersVM.pools}" var="pool" itemLabel="#{pool.name}"/>
				</p:selectOneMenu>
			</li>
			<li>
				<p:outputLabel styleClass="width-100" value="#{phoneNumbersBundle['box.nri.phones.spec_label']}:"/>
				<p:selectOneMenu value="#{phoneNumbersViewState.specification}">
					<f:selectItem itemValue="#{null}" itemLabel="" noSelectionOption="true"/>
					<f:selectItems value="#{phoneNumbersVM.specifications}" var="spec"
								   itemValue="#{spec}" itemLabel="#{spec.name}"/>
				</p:selectOneMenu>
			</li>
		</ul>
	</ui:define>

	<ui:define name="searchResult">
		<h:form id="#{resultFormId}">
			<div class="ui-dashboard-header">
				<i class="fa fa-binoculars"/>
				<h:outputText styleClass="card-header" value="#{phoneNumbersBundle['box.nri.phones.search_result']}"/>
				<p:outputPanel id="header_buttons" styleClass="m-fright"
							   rendered="#{p:ifGranted('Nri_PhoneNumberListEdit')}">
					<p:commandButton id="clear_selected_phones_button" action="#{phoneNumbersVM.clearSelected()}"
									 rendered="#{not empty phoneNumbersVM.selectedPhones}"
									 value="#{phoneNumbersBundle['box.nri.phones.unselect']}" update="@form"
									 styleClass="m-mar-right10 m-blue-text-button m-raised-button"/>
					<p:commandButton id="move_phone_button" disabled="#{empty phoneNumbersVM.selectedPhones}"
									 value="#{phoneNumbersBundle['box.nri.phones.move_button']}"
									 styleClass="m-mar-right10"
									 rendered="#{p:ifGranted('Nri_PhoneNumberListEdit')}"
									 action="#{phoneNumberMovingDM.onMovingDialogOpen(phoneNumbersVM.pools, phoneNumbersVM.selectedPhones)}"
									 update="phone_number_moving_dlg" oncomplete="PF('phoneNumberMovingDlg').show();">
						<f:setPropertyActionListener value="#{phoneNumbersVM.reloadData}"
													 target="#{phoneNumberMovingDM.onMoveButtonPressed}"/>
					</p:commandButton>
					<p:commandButton id="delete_phone_button" disabled="#{empty phoneNumbersVM.selectedPhones}"
									 value="#{phoneNumbersBundle['box.nri.phones.remove_button']}"
									 action="#{phoneNumbersVM.remove}" update="@form"
									 rendered="#{p:ifGranted('Nri_PhoneNumberListEdit')}"
									 styleClass="m-mar-right10">
						<p:confirm header="#{phoneNumbersBundle['box.nri.phones.confirm']}" message="#{phoneNumbersBundle['box.nri.phones.confirm_to_delete']}"
								   icon="ui-icon-alert"/>
					</p:commandButton>
				</p:outputPanel>

			</div>

			<!--@elvariable id="phone" type="ru.argustelecom.box.nri.logicalresources.phone.PhoneNumberDto"-->
			<p:dataTable id="phone_numbers_table" value="#{phoneNumbersVM.lazyNumbers}" var="phone" lazy="true"
						 paginator="true" rows="25" emptyMessage="#{overallBundle['box.overall.empty']}"
						 currentPageReportTemplate="{startRecord} - {endRecord} #{phoneNumbersBundle['box.nri.phones.from_word']} {totalRecords}"
						 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink}
								{PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						 rowsPerPageTemplate="25,50,100" selection="#{phoneNumbersVM.selectedPhones}"
						 sortBy="#{PhoneNumberSort.NAME}" rowSelectMode="checkbox">

				<p:ajax event="rowSelectCheckbox" update="@form-header_buttons"/>
				<p:ajax event="rowUnselectCheckbox" update="@form-header_buttons"/>
				<p:ajax event="rowSelect" update="@form-header_buttons"/>
				<p:ajax event="rowUnselect" update="@form-header_buttons"/>
				<p:ajax event="toggleSelect" update="@form-header_buttons"/>

				<p:column selectionMode="multiple" styleClass="width-16"/>

				<p:column headerText="#{phoneNumbersBundle['box.nri.phones.number_label']}"
						  sortBy="#{PhoneNumberSort.NAME}">
					<h:outputLink value="PhoneNumberView.xhtml?phoneNumber=PhoneNumber-#{phone.id}">
						<h:outputText value="#{phone.name}"/>
					</h:outputLink>
				</p:column>

				<p:column headerText="#{phoneNumbersBundle['box.nri.phones.pool_label']}:"
						  sortBy="#{PhoneNumberSort.POOL}">
					<h:outputLink value="PhoneNumberPoolView.xhtml?pool=PhoneNumberPool-#{phone.pool.id}">
						<h:outputText value="#{phone.pool.name}"/>
					</h:outputLink>
				</p:column>

				<p:column headerText="#{phoneNumbersBundle['box.nri.phones.state_label']}:"
						  sortBy="#{PhoneNumberSort.STATE}">
					<h:outputText value="#{phone.state.name}"/>
				</p:column>

				<p:column headerText="#{phoneNumbersBundle['box.nri.phones.spec_label']}:"
						  sortBy="#{PhoneNumberSort.SPECIFICATION}">
					<h:outputText value="#{phone.specification.type.name}"/>
				</p:column>
			</p:dataTable>
		</h:form>
	</ui:define>

</ui:composition>