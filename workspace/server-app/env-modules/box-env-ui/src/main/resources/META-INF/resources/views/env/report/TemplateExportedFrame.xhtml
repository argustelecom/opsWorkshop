<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui"
				xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena"
				xmlns:f="http://java.sun.com/jsf/core">

	<f:loadBundle var="reportBundle" basename="ReportBundle"/>
	<ui:fragment rendered="#{not empty templates}">
		<f:event type="preRenderComponent" listener="#{selectReportFm.preRender(templates, exportFnc)}"/>

		<div class="fake-btn" content="#{reportBundle['box.report.export']}">
			<p:selectOneMenu id="select_report" value="#{selectReportFm.selectedReport}">
				<p:ajax event="change" update="@form"/>
				<f:selectItems value="#{selectReportFm.reports}"/>
				<f:selectItem value="#{null}"/>
			</p:selectOneMenu>
			<h:commandLink id="export_link" styleClass="export-link hidden" update="select_report">
				<p:fileDownload value="#{selectReportFm.export()}"/>
			</h:commandLink>
		</div>

	</ui:fragment>

	<script type="text/javascript">
        function clickBtn() {
            $('.export-link').click();
        }
	</script>
</ui:composition>