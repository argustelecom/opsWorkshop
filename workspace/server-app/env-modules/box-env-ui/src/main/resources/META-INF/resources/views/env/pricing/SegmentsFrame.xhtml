<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<f:loadBundle var="segmentBundle" basename="SegmentBundle"/>
	<div class="#{containerClass eq null ? 'm-container100' : containerClass} m-responsive100">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect custom-content-card simple-fb">
				<h:form id="pricelist_segments_form" style="height: 350px;">

					<f:event type="preRenderComponent" listener="#{segmentsFrameModel.preRender(pricelist)}"/>

					<div class="ui-dashboard-header">
						<i class="icon-center_focus_weak"/>
						<h:outputText styleClass="card-header"
									  value="#{segmentBundle['box.segment.plural']}"/>

						<o:importConstants type="ru.argustelecom.box.env.pricing.lifecycle.AbstractPricelistLifecycle.Behaviors" var="behavior"/>
						<p:outputPanel styleClass="m-fright" rendered="#{!behaviorUtils.isForbidden(currentPricelist.value, behavior.modifySegments)}">
							<p:commandLink styleClass="m-mar-left10" process="@this"
										   title="#{overallBundle['box.overall.add']}"
											action="#{pricelistAddSegmentDialogModel.onCreationDialogOpen()}"
											rendered="#{not empty segmentsFrameModel.segments}"
											disabled="#{!p:ifGranted('ProductManagment_CommonPriceListEdit')}">
											<i class="fa fa-edit icon-btn"/>
											<f:setPropertyActionListener value="#{segmentsFrameModel.pricelist}"
																		 target="#{pricelistAddSegmentDialogModel.pricelist}"/>
							</p:commandLink>
						</p:outputPanel>
					</div>

					<p:dataScroller var="segment" chunkSize="10" mode="inline" scrollHeight="300"
									value="#{segmentsFrameModel.pricelist.customerSegments}">
						<div class="m-card m-shadow-effect">
							<div class="ui-dashboard-header">
								<div class="m-fleft">
									#{segment.objectName}
								</div>

								<div class="m-fright">
									<p:commandLink action="#{segmentsFrameModel.remove(segment)}"
													 process="@this" styleClass="remove-card-btn" update="pricelist_segments_form"
													 rendered="#{!behaviorUtils.isForbidden(currentPricelist.value, behavior.modifySegments)}"
													 disabled="#{!p:ifGranted('ProductManagment_CommonPriceListEdit')}">
                                        <i class="fa fa-trash fs18 icon-btn"/>
                                        <p:confirm header="#{segmentBundle['box.segment.delete_dialog']}"
												   message="#{segmentBundle['box.segment.delete_dialog.details']}"/>
                                    </p:commandLink>
								</div>
								<div class="m-clear-both"></div>
							</div>
						</div>
					</p:dataScroller>

				</h:form>
			</div>
		</div>
	</div>

</ui:composition>