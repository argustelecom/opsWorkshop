<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
                xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena"
                xmlns:f="http://java.sun.com/jsf/core">

                <f:loadBundle var="lifecycleBundle" basename="LifecycleBundle"/>
				<ui:fragment rendered="#{dashboardHeader}">
					<div class="ui-dashboard-header">
						<i class="icon-repeat2"/>
						<h:outputText styleClass="card-header" value="#{lifecycleBundle['box.lc.history']}"/>
						<h:outputText id="http" class="icon-help_outline tooltip-help-15"
                                      title="#{lifecycleBundle['box.lc.history.details']}"/>
						<p:tooltip id="history_ttp" for="http" />
					</div>
				</ui:fragment>

				<p:outputPanel id="lifecycle_history_panel">
                    <f:event listener="#{lifecycleHistoryFm.preRender(historyContext)}" type="preRenderComponent" />

                    <p:dataTable id="lifecycle_history_table" value="#{lifecycleHistoryFm.items}" var="lifecyclehistory"
								 paginator="true" tableStyle="table-layout: auto;"
								 rowsPerPageTemplate="5,10,15" rows="5" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								 currentPageReportTemplate="{startRecord} - {endRecord} #{overallBundle['box.overall.from']} {totalRecords}"
								 styleClass="paginator-top-hidden" emptyMessage="#{overallBundle['box.overall.empty']}">

                        <p:column headerText="#{lifecycleBundle['box.lc.history.transition.time']}">
                            <h:outputText value="#{lifecyclehistory.transitionTime}">
                                <sysinf:convertDateTime pattern="#{dateUtils.DATETIME_DEFAULT_PATTERN}"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="#{lifecycleBundle['box.lc.history.transition.from']}">
                            <h:outputText value="#{lifecyclehistory.fromState}"/>
                        </p:column>

                        <p:column headerText="#{lifecycleBundle['box.lc.history.transition.to']}">
                            <h:outputText value="#{lifecyclehistory.toState}"/>
                        </p:column>

                        <p:column headerText="#{lifecycleBundle['box.lc.history.transition.initiator']}">
                            <h:outputText value="#{lifecyclehistory.initiatorName}"/>
                        </p:column>

                    </p:dataTable>

                </p:outputPanel>
</ui:composition>