<ui:composition template="/views/inf/page/View.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
                xmlns:pm="http://primefaces.org/modena">

    <ui:param name="viewModel" value="#{taskCardViewModel}"/>
    <ui:param name="pageTitle" value="#{taskBundle['box.task']}" />

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="task" value="#{currentTask.value}"/>
        </f:metadata>
    </ui:define>

    <ui:define name="head">
        <h:outputStylesheet name="box-env/styles/box-env.css"/>
        <h:outputStylesheet name="inf/styles/box-functional-block.css"/>

        <f:loadBundle var="taskBundle" basename="TaskBundle"/>
        <f:loadBundle var="serviceBundle" basename="ServiceBundle"/>
    </ui:define>

    <ui:define name="pagePath">
        <p:menuitem value="#{overallBundle['box.overall.home']}" url="/views/env/home/HomeView.xhtml"/>
        <p:menuitem value="#{taskBundle['box.task.plural']}" url="/views/env/task/TaskListView.xhtml"/>
        <p:menuitem value="#{taskBundle['box.task']} #{currentTask.value.number}"/>
    </ui:define>

    <ui:define name="body">
        <ui:include src="TaskAttributesFrame.xhtml"/>

        <div class="m-container100 m-responsive100">
            <div class="m-container50 m-responsive100">
                <ui:include src="/views/env/services/ServicesFrame.xhtml">
                	<ui:param name="services" value="#{taskCardViewModel.services}" />
                </ui:include>

                <div class="m-container100 m-responsive100">
                    <div class="m-container-indent">
                        <div class="m-card m-shadow-effect m-hei-auto-on-mobile">
                            <ui:include src="/views/env/activity/ActivityFrame.xhtml">
                                <ui:param name="contextObject" value="#{currentTask.value}"/>
                            </ui:include>
                        </div>
                    </div>
                </div>
            </div>

            <div class="m-container50 m-responsive100">
                <ui:include src="TaskInfoFrame.xhtml"/>
            </div>
        </div>
    </ui:define>

    <ui:define name="dialogs">
        <ui:include src="/views/env/task/TaskAssigneeDialog.xhtml">
            <ui:param name="update" value="task_attributes_form"/>
        </ui:include>

        <ui:include src="/views/env/task/TaskLifecycleDialog.xhtml">
            <ui:param name="update" value="task_attributes_form"/>
        </ui:include>

		<ui:include src="/views/env/activity/comment/CommentEditDialog.xhtml"/>
    </ui:define>

</ui:composition>