<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core">

	<f:loadBundle var="numerationBundle" basename="NumerationBundle"/>
	<h:form id="sequence_edit_form">
		<p:dialog id="sequence_edit_dlg"
				  header="#{numerationSequenceEditDM.isEditMode() ? numerationBundle['box.numeration.sequence.edit_dialog'] : numerationBundle['box.numeration.sequence.create_dialog']}"
				  width="600"
			styleClass="icon-creation" widgetVar="sequenceEditDlgVar" resizable="false" modal="true" closable="false"
			dynamic="true">
			<f:event type="preRenderComponent" listener="#{numerationSequenceEditDM.preRender()}" />
			<ui:fragment rendered="#{!empty numerationSequenceEditDM.info}">
				<div class="messages-container">
					<ul>
						<li>
							<div class="message-icon message-bg-warn message-icon-warn">
								<p>
									<span class="m-font-roboto-medium">
										#{numerationBundle['box.numeration.sequence.edit_dialog.warning']}
									</span>
									#{numerationBundle['box.numeration.sequence.edit_dialog.warning.details']} #{numerationSequenceEditDM.info}.
								</p>
							</div>
						</li>
					</ul>
				</div>
			</ui:fragment>

			<dl class="name-value width-150">
				<dt>
					<p:outputLabel for="name" value="#{overallBundle['box.overall.name']}:" />
				</dt>
				<dd>
					<p:inputText id="name" value="#{numerationSequenceEditDM.sequence.name}" required="true"
						styleClass="width-83-percents" disabled="#{numerationSequenceEditDM.editMode}"
								 label="#{overallBundle['box.overall.name']}">
						<f:validator binding="#{numerationSequenceNameValidator}"/>
					</p:inputText>
				</dd>

				<dt>
					<p:outputLabel for="initial_value"
								   value="#{numerationBundle['box.numeration.sequence.value.initial']}:" />
				</dt>
				<dd>
					<p:inputText id="initial_value" value="#{numerationSequenceEditDM.sequence.initialValue}" required="true"
						styleClass="width-83-percents" label="#{numerationBundle['box.numeration.sequence.value.initial']}">
						<f:validateLongRange minimum="1" />
						<f:validator validatorId="ru.argustelecom.box.env.numerationpattern.CapacityValidator"/>
					</p:inputText>
				</dd>

				<dt>
					<p:outputLabel for="increment" value="#{numerationBundle['box.numeration.sequence.increment']}:" />
				</dt>
				<dd>
					<p:inputText id="increment" value="#{numerationSequenceEditDM.sequence.increment}" required="true"
						styleClass="width-83-percents" label="#{numerationBundle['box.numeration.sequence.increment']}">
						<f:validateLongRange minimum="1" />
						<f:validator validatorId="ru.argustelecom.box.env.numerationpattern.CapacityValidator"/>
					</p:inputText>
				</dd>

				<dt>
					<p:outputLabel for="period" value="#{numerationBundle['box.numeration.sequence.period']}:" />
				</dt>
				<dd>
					<p:selectOneMenu id="period" value="#{numerationSequenceEditDM.sequence.period}" process="@this"
						styleClass="width-83-percents" required="true" label="#{numerationBundle['box.numeration.sequence.period']}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{numerationSequenceEditDM.periodTypes}" var="period" itemLabel="#{period.getName()}"
							itemValue="#{period}" />
					</p:selectOneMenu>
				</dd>

				<dt>
					<p:outputLabel for="capacity" value="#{numerationBundle['box.numeration.sequence.capacity']}:" />
				</dt>
				<dd>
					<p:inputText id="capacity" value="#{numerationSequenceEditDM.sequence.capacity}" styleClass="width-83-percents">
						<f:validateLongRange minimum="1" maximum="16"/>
					</p:inputText>
				</dd>

				<dt>
					<p:outputLabel for="valid_until" value="#{overallBundle['box.overall.valid_to']}:"
								   rendered="#{numerationSequenceEditDM.editMode}" />
				</dt>
				<dd>
					<p:calendar id="valid_until" value="#{numerationSequenceEditDM.sequence.validTo}"
						pattern="#{dateUtils.DATE_DEFAULT_PATTERN}" styleClass="width-83-percents"
								locale="#{languageBean.locale.language}" disabled="true"
						rendered="#{numerationSequenceEditDM.editMode}">
					</p:calendar>
				</dd>

				<dt>
					<p:outputLabel for="current_value"
								   value="#{numerationBundle['box.numeration.sequence.value.current']}:"
								   rendered="#{numerationSequenceEditDM.editMode}" />
				</dt>
				<dd>
					<p:inputText id="current_value" value="#{numerationSequenceEditDM.sequence.currentValue}"
						styleClass="width-83-percents" disabled="true" rendered="#{numerationSequenceEditDM.editMode}" />
				</dd>
			</dl>
			<ui:fragment rendered="#{!empty numerationSequenceEditDM.info}">
				<div class="m-mar-top10">
					<h:outputText value="#{numerationBundle['box.numeration.sequence.create_dialog.acquainted']}: " for="ignore_warnings"
                                  styleClass="m-disp-inl-block m-vertical-top m-mar-top5 m-mar-right8"/>
					<p:selectBooleanCheckbox id="ignore_warnings"
											 value="#{numerationSequenceEditDM.ignoreWarnings}">
						<p:ajax update="submit_button"/>
					</p:selectBooleanCheckbox>
				</div>
			</ui:fragment>

			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_button" value="#{overallBundle['box.overall.cancel']}"
					styleClass="m-blue-text-button" update="sequence_edit_dlg" process="@this"
					onclick="PF('sequenceEditDlgVar').hide()" action="#{numerationSequenceEditDM.clear()}" />
				<p:commandButton id="submit_button" value="#{overallBundle['box.overall.save']}"
					disabled="#{!numerationSequenceEditDM.ignoreWarnings and !empty numerationSequenceEditDM.info}"
					oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('sequenceEditDlgVar').hide()}"
					action="#{numerationSequenceEditDM.submit()}" process="sequence_edit_dlg" update="#{update}">
					<p:ajax listener="#{numerationSequenceFrameModel.lazyDm.reloadData()}"/>
				</p:commandButton>
			</div>

		</p:dialog>
	</h:form>

</ui:composition>
