<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html">

	<h:form id="schema_booking_info_form">
		<o:importConstants type="ru.argustelecom.box.nri.logicalresources.ip.address.lifecycle.IPAddressState"/>
		<f:event listener="#{schemaBookingInfoFrameModel.preRender(schema)}"
				 type="preRenderComponent"/>
		<p:outputPanel id="schema_booking_info_panel" styleClass="m-container100"
					   rendered="#{schema ne null}">
			<div class="m-container-indent">
				<p:outputPanel id="info_panel" styleClass="m-card m-shadow-effect simple-fb">
					<div class="ui-dashboard-header">
						<i class="fa fa-list-ol"/>
						<h:outputText styleClass="card-header"
									  value="#{bookingBundle['box.nri.booking.book_resources_header']}"/>
						<p:outputPanel styleClass="m-fright">
							<p:menuButton value="#{bookingBundle['box.nri.booking.book_word']}">
								<p:menuitem value="#{bookingBundle['box.nri.booking.book_ip_addr']}"
											oncomplete="PF('createRequirementDlg').show()"
											update="@widgetVar(createRequirementDlg)"
											action="#{createRequirementDialogModel.onCreationDialogOpen(schemaBookingInfoFrameModel.currentSchema)}">
									<f:setPropertyActionListener
											value="#{schemaBookingInfoFrameModel.createNewIpAddressRequirement}"
											target="#{createRequirementDialogModel.onCreateIpAddressRequirementButtonPressed}"/>
								</p:menuitem>
								<p:menuitem value="#{bookingBundle['box.nri.booking.book_phone_number']}"
											action="#{schemaBookingInfoFrameModel.addPhoneBooking}"
											update="@form"/>
							</p:menuButton>
						</p:outputPanel>
					</div>
					<p:dataTable id="requirement_table" value="#{schemaBookingInfoFrameModel.bookingRequirementDtos}"
								 var="req"
								 rowExpandMode="single"
								 rowKey="#{req.id}" scrollable="true" scrollHeight="90%" selectionMode="single">
						<p:ajax event="rowToggle" listener="#{schemaBookingInfoFrameModel.onRowToggle}"/>
						<p:column style="width:16px">
							<p:rowToggler/>
						</p:column>
						<p:column headerText="#{bookingBundle['box.nri.booking.name']}">
							<h:outputText id="name_out" value="#{req.name}"/>
						</p:column>
						<p:column headerText="#{bookingBundle['box.nri.booking.type']}">
							<h:outputText id="type_out" value="#{req.bookingType.caption}"/>
						</p:column>

						<p:rowExpansion>
							<p:outputPanel styleClass="m-fright">
								<p:commandLink id="remove_button" styleClass="m-mar-left10"
											   action="#{schemaBookingInfoFrameModel.removeSelectedReq}"
											   update="schema_booking_info_form-schema_booking_info_panel">
									<i class="fa fa-trash icon-btn"/>
									<p:confirm
											header="#{bookingBundle['box.nri.booking.confirm_header']}"
											message="#{bookingBundle['box.nri.booking.confirm_message']}"/>
								</p:commandLink>
							</p:outputPanel>
							<ui:include src="BookingRequirementInfoViewFrame.xhtml">
								<ui:param name="requirement"
										  value="#{schemaBookingInfoFrameModel.selectedRequirement}"/>
							</ui:include>
						</p:rowExpansion>
					</p:dataTable>

				</p:outputPanel>
			</div>
		</p:outputPanel>
	</h:form>
	<ui:include src="CreateRequirementDialog.xhtml"/>
</ui:composition>