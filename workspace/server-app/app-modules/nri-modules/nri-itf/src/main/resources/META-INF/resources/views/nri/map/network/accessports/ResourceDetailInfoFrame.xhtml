<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui"
				xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<ui:param name="building" value="#{currentMapObject.valueAsBuilding}"/>
	<f:event listener="#{resourceDetailInfoFM.preRender(building)}" type="preRenderView"/>
	<f:event listener="#{buildingResInstallationFM.preRender(resourceDetailInfoFM.currentBuildingElement)}"
			 type="preRenderView"/>
	<f:loadBundle basename="BuildingElementBundle" var="buildingElementBundle"/>


	<div class="ui-dashboard-header map-selection-detail-panel-header">
		<div>
			<h:outputLink id="inst_address"
						  value="../building/BuildingStructureView.xhtml?location=Building-#{building.id}">
				<div class="fa fa-home">
					<h:outputText styleClass="card-header" value="#{building.fullName}"/>
				</div>
			</h:outputLink>
		</div>
		<div>
			<p:outputLabel value="#{resourceDetailInfoFM.currentBuildingElement.name}"/>
		</div>
	</div>
	<div class="m-container100 m-responsive100">
		<p:panel>
			<h3 class="h3-header">
				<h:outputText value="#{mapBundle['box.nri.map.coverage_zone']}"/>
			</h3>
			<dl class="name-value width-250">
				<dt>
					<p:outputLabel value="#{mapBundle['box.nri.map.abon_lodgings']}"/>
				</dt>
				<dd>
					<p:outputLabel value="#{resourceDetailInfoFM.all}"/>
				</dd>
				<dt>
					<p:outputLabel value="#{mapBundle['box.nri.map.covered']}"/>
				</dt>
				<dd>
					<p:outputLabel value="#{resourceDetailInfoFM.covered}"/>
				</dd>
			</dl>
		</p:panel>
	</div>
	<div class="m-container100 m-responsive100">
		<ui:fragment rendered="#{resourceDetailInfoFM.currentBuildingElement ne null}">
			<p:panel>
				<h3 class="h3-header">
					<h:outputText styleClass="m-disp-inl-block"
								  value="#{buildingElementBundle['box.nri.building.installed_resources']}"/>
				</h3>


				<p:dataTable value="#{buildingResInstallationFM.allInstalledResources}" var="resInstallation"
							 rowKey="#{resInstallation.id}" scrollable="true" selectionMode="single"
							 selection="#{buildingResInstallationFM.selectedInstallation}">
					<p:ajax event="rowSelect"
							listener="#{buildingResInstallationFM.installedResourcesRowSelect}"/>

					<p:column headerText="#{buildingElementBundle['box.nri.building.resource_name']}">
						<p:row>
							<p:outputLabel value="#{resInstallation.resource.name}"/>
						</p:row>
					</p:column>
					<p:column headerText="#{buildingElementBundle['box.nri.building.installed']}">
						<a href="/box/views/nri/building/BuildingStructureView.xhtml?location=&amp;buildingElement=BuildingElement-#{resInstallation.installedAt.id}"
						   class="link-in-table-cell">
							<p:row>
								<p:outputLabel value="#{resInstallation.installedAt.name}"/>
							</p:row>
						</a>
					</p:column>

				</p:dataTable>

			</p:panel>
		</ui:fragment>
	</div>
</ui:composition>