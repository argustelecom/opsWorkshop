<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<p:dialog id="building_element_creation_dlg"
			  header="#{buildingElementBundle['box.nri.building.create_header']}" width="500"
			  widgetVar="buildingElementCreationDlg" resizable="false" modal="true" closable="false"
			  styleClass="icon-creation">
		<h:form id="building_element_creation_form">
			<dl class="name-value">
				<dt>
					<p:outputLabel for="new_name"
								   value="#{buildingElementBundle['box.nri.building.name_label']}:"/>
				</dt>
				<dd>
					<p:inputText id="new_name" value="#{buildingStructureVM.newElement.name}" style="width: 100%;"
								 validator="#{buildingStructureVM.nameValidator}"
								 maxlength="128" required="true"
								 requiredMessage="#{commonBundle['box.nri.common.name_required']}">
						<p:ajax event="change" process="@this"/>
					</p:inputText>
				</dd>
				<dt>
					<p:outputLabel for="new_level"
								   value="#{buildingElementBundle['box.nri.building.type_label']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="new_level" value="#{buildingStructureVM.newElement.type}"
									 required="true" requiredMessage="#{commonBundle['box.nri.common.type_required']}"
									 style="width: 100%;">
						<f:converter converterId="nriDtoConverter"/>
						<p:ajax event="change" update="@form"/>
						<f:selectItem itemValue="#{null}"/>
						<f:selectItems var="type" value="#{buildingStructureVM.types}"
									   itemLabel="#{type.name}"/>
					</p:selectOneMenu>
				</dd>
				<p:outputPanel styleClass="name-value" rendered="#{buildingStructureVM.isAddressVisible()}"
							   style="margin: 0 -3px;">
					<dt>
						<p:outputLabel value="#{buildingElementBundle['box.nri.building.location_label']}:"/>
					</dt>
					<dd>
						<p:selectOneMenu id="new_building" value="#{buildingStructureVM.newElement.location}"
										 filter="true" filterMatchMode="contains">
							<f:selectItem value="#{null}"/>
							<f:selectItems value="#{buildingStructureVM.freeLodgings}" var="lodging"
										   itemValue="#{lodging}" itemLabel="#{lodging.fullName}"/>
						</p:selectOneMenu>
					</dd>
				</p:outputPanel>
			</dl>

			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_button"
								 value="#{overallBundle['box.overall.cancel']}"
								 styleClass="m-blue-text-button"
								 update="building_element_creation_dlg" process="@this"
								 action="#{buildingStructureVM.cleanCreationParams()}"
								 onclick="PF('buildingElementCreationDlg').hide()"/>
				<p:commandButton id="create_button"
								 value="#{overallBundle['box.overall.create']}"
								 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('buildingElementCreationDlg').hide()};
											 Argus.System.AutoHeight.compute('building_elem_tree_form-building_elem_tree', 35);"
								 action="#{buildingStructureVM.create()}"
								 update="#{update}"/>
			</div>
		</h:form>
	</p:dialog>

</ui:composition>