<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<p:outputPanel rendered="#{p:ifGranted('CRM_ContractExtensionView')}">
		<div class="#{containerClass eq null ? 'm-container100' : containerClass} m-responsive100">
			<div class="m-container-indent">
				<div class="m-card m-shadow-effect custom-content-card simple-fb">
					<h:form id="cotract_extansions_form">

						<o:importConstants type="ru.argustelecom.box.env.contract.lifecycle.ContractLifecycle.Behaviors" var="behavior"/>

						<div class="ui-dashboard-header">
							<i class="fa fa-chain (alias)"/>
							<h:outputText styleClass="card-header"
										  value="#{contractBundle['box.contract.extension.plural']}"/>

							<p:outputPanel styleClass="m-fright">
								<p:commandLink id="add_contract_extension" styleClass="m-mar-left10" process="@this"
											   title="#{overallBundle['box.overall.add']}"
											 	action="#{contractExtensionCreationDialogModel.onCreationDialogOpen()}"
											    rendered="#{!behaviorUtils.isForbidden(contractCardViewModel.contract, behavior.editExtension)}"
											 	disabled="#{!p:ifGranted('CRM_ContractExtensionView')}">
												<i class="fa fa-edit icon-btn"/>
												<f:setPropertyActionListener value="#{contractCardViewModel.contract}"
																			target="#{contractExtensionCreationDialogModel.contract}"/>
												<f:setPropertyActionListener value="#{contractCardViewModel.contract.customer}"
																			target="#{contractExtensionCreationDialogModel.newCustomer}"/>
								</p:commandLink>
							</p:outputPanel>
						</div>

						<ui:include src="ContractsBodyFrame.xhtml">
							<ui:param name="contracts" value="#{contracts}"/>
						</ui:include>

					</h:form>
				</div>
			</div>
		</div>
	</p:outputPanel>

	<ui:include src="/views/env/page/frame/NotGrantedFrame.xhtml">
		<ui:param name="headerIcon" value="fa fa-chain (alias)" />
		<ui:param name="headerText" value="#{contractBundle['box.contract.extension']}" />
		<ui:param name="permission" value="#{permissionRepository.getPermission('CRM_ContractExtensionView')}" />
	</ui:include>

</ui:composition>