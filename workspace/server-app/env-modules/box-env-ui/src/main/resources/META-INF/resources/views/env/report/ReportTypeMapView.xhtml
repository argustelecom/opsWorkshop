<ui:composition template="/views/inf/page/View.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
                xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena">

    <ui:param name="viewModel" value="#{reportTypeMapVm}"/>
    <ui:param name="pageTitle" value="#{reportBundle['box.report.map']}"/>

    <!--<ui:define name="metadata">-->
        <!--<f:metadata>-->
            <!--<f:viewParam name="documentType" value="#{documentTypeDirectoryVs.documentTypeUnit}" required="false"-->
                         <!--converter="documentTypeUnitConverter" />-->
        <!--</f:metadata>-->
    <!--</ui:define>-->

    <ui:define name="head">
        <h:outputStylesheet name="box-env/styles/box-env.css" />
        <h:outputStylesheet name="inf/styles/box-functional-block.css" />
    </ui:define>

    <ui:define name="pagePath">
        <f:loadBundle basename="OverallBundle" var="overallBundle" />
        <f:loadBundle basename="ReportBundle" var="reportBundle" />

        <p:menuitem value="#{overallBundle['box.overall.home']}" url="/views/env/home/HomeView.xhtml"/>
        <p:menuitem value="#{reportBundle['box.report.map']}"/>
    </ui:define>

    <ui:define name="body">
        <ui:repeat value="#{reportTypeMapVm.groups}" var="group">
            <div class="m-container50 m-responsive100">
                <div class="m-container100">
                    <div class="m-container-indent">
                        <div class="m-card m-shadow-effect simple-fb">
                            <h:form>
                                <div class="ui-dashboard-header">
                                    <i class="fa fa-folder-open"/>
                                    <h:outputText styleClass="card-header"  value="#{group eq null ? reportBundle['box.report.group.empty'] : group.name}"/>
                                </div>

                                <p:dataTable id="report_map_table" value="#{reportTypeMapVm.getReportTypes(group)}" var="reportType"
                                             styleClass="paginator-top-hidden hide-tr-header" emptyMessage="#{overallBundle['box.overall.empty']}">
                                    <p:column>
                                        <i class="icon-paper fs18 m-disp-inl-block m-pad-right10"/>
                                        <p:commandLink value="#{reportType.name}" oncomplete="PF('reportTypeExportDlgVar').show()"
                                                       update="report_type_export_form"
                                                       title="#{reportBundle['box.report.edit']} #{reportType.name}">
                                            <p:ajax process="@this" listener="#{reportTypeMapVm.setSelectedReportType(reportType)}"/>
                                            <f:setPropertyActionListener value="#{reportTypeMapVm.selectedReportType}"
                                                                         target="#{reportTypeExportDm.reportType}"/>
                                            <f:setPropertyActionListener value="#{reportTypeMapVm.reportParams}"
                                                                         target="#{reportTypeExportDm.reportParams}"/>
                                        </p:commandLink>
                                    </p:column>
                                </p:dataTable>
                            </h:form>
                        </div>
                    </div>
                </div>
            </div>
        </ui:repeat>
    </ui:define>

    <ui:define name="dialogs">
        <ui:include src="ReportTypeExportDialog.xhtml"/>
    </ui:define>

</ui:composition>