<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<p:dialog id="resource_creation_dialog" widgetVar="resourceCreationDlg" header="#{resourceBundle['box.nri.resource.create_header']}"
			  width="650" appendTo="@(body)" modal="true" dynamic="true" closable="false"
			  resizable="false" styleClass="icon-creation">
		<h:form id="resource_creation_form">
			<p:outputPanel id="new_resource_spec_panel" style="width: 100%"
						   rendered="#{resourcesVM.newElemSpecificationId eq null}">
				<dl class="name-value width-250">
					<dt>
						<p:outputLabel for="new_spec" value="#{resourceBundle['box.nri.resource.choose_spec']}"/>
					</dt>
					<dd>
						<p:selectOneMenu value="#{resourcesVM.newElemSpecificationId}"
										 id="new_spec" required="true">
							<p:ajax event="change" update="@form" process="@this"
									oncomplete="PF('resourceCreationDlg').initPosition()"/>
							<f:selectItem value="#{null}"/>
							<f:selectItems value="#{resourcesVM.rootSpecifications}" var="spec"
										   itemLabel="#{spec.name}" itemValue="#{spec.id}"/>
						</p:selectOneMenu>
					</dd>
				</dl>
			</p:outputPanel>

			<p:outputPanel id="new_resource_param_panel"
						   rendered="#{resourcesVM.newElemSpecificationId ne null}">
				<ui:include src="CreateResourceInfoFrame.xhtml">
					<ui:param name="parentResource" value="#{null}"/>
					<ui:param name="specificationId" value="#{resourcesVM.newElemSpecificationId}"/>
				</ui:include>
			</p:outputPanel>
			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_creation_button"
								 value="#{overallBundle['box.overall.cancel']}"
								 styleClass="m-blue-text-button" immediate="true"
								 resetValues="true" update="@form"
								 action="#{resourcesVM.cleanCreationParams()}"
								 onclick="PF('resourceCreationDlg').hide()"/>
				<p:commandButton id="dialog_create_button"
								 value="#{overallBundle['box.overall.create']}"
								 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('resourceCreationDlg').hide();
								  #{resourcesVM.lazyResources.reloadData()};}"
								 actionListener="#{createResourceInfoFrameModel.createResource()}"
								 update="@form ${update} resources_search_result_form"/>
			</div>
	</h:form>
	</p:dialog>

</ui:composition>