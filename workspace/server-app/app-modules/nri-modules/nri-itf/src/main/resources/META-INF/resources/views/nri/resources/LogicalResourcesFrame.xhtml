<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html">

	<f:event listener="#{resourceLogicalResFM.preRender(resourceInstance)}"
			 type="preRenderComponent"/>

	<f:loadBundle basename="ResourceBundle" var="resourceBundle"/>
	<o:importConstants type="ru.argustelecom.box.nri.logicalresources.model.LogicalResourceType"/>

	<div class="m-container100">
		<div class="m-container-indent">
			<p:outputPanel styleClass="m-card m-shadow-effect m-hei-auto-on-mobile simple-fb">

				<div class="ui-dashboard-header">
					<i class="fa fa-phone"/>
					<h:outputText styleClass="card-header"
								  value="#{resourceBundle['box.nri.resource.bounded_phone_numbers']}"/>

					<p:outputPanel styleClass="m-fright">
						<p:menuButton id="menu_button" value="#{resourceBundle['box.nri.resource.action']}">
							<p:menuitem action="#{resourceLogicalResFM.init}"
										oncomplete="PF('addPhoneNumberDlg').show()"
										update="@widgetVar(addPhoneNumberDlg)"
										rendered="#{p:ifGranted('Nri_ResourceInfoEdit')}">
								<i class="fa fa-phone"/>#{resourceBundle['box.nri.resource.add_phone_number']}
							</p:menuitem>
							<p:separator/>
							<p:menuitem update="logical_resources_form"
										action="#{resourceLogicalResFM.removeSelected()}"
										rendered="#{p:ifGranted('Nri_ResourceInfoEdit')}"
										disabled="#{false or empty resourceLogicalResFM.selectedPhoneNumbers }">
								<i class="fa fa-trash icon-btn"/>#{overallBundle['box.overall.delete']}
								<p:confirm header="#{resourceBundle['box.nri.resource.confirm']}"
										   message="#{resourceBundle['box.nri.resource.unbind_selected_phone_numbers']}"/>
							</p:menuitem>
						</p:menuButton>
					</p:outputPanel>
				</div>

				<p:dataTable id="phone_numbers_table" value="#{resourceLogicalResFM.resource.logicalResources}"
							 var="lr" selection="#{resourceLogicalResFM.selectedPhoneNumbers}"
							 rowKey="#{lr.id}" scrollable="true"
							 paginator="true" rows="10"
							 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							 rowsPerPageTemplate="10, 25, 100">

					<p:ajax event="rowSelectCheckbox" update="@form-menu_button"/>
					<p:ajax event="rowUnselectCheckbox" update="@form-menu_button"/>
					<p:ajax event="rowSelect" update="@form-menu_button"/>
					<p:ajax event="rowUnselect" update="@form-menu_button"/>
					<p:ajax event="toggleSelect" update="@form-menu_button"/>

					<p:column selectionMode="multiple" styleClass="width-16"/>
					<p:column headerText="#{resourceBundle['box.nri.resource.resource_word']}">
						<h:outputLink rendered="#{lr.type eq LogicalResourceType.PHONE_NUMBER}"
								value="../logicalresources/PhoneNumberView.xhtml?phoneNumber=PhoneNumber-#{lr.id}">
							<h:outputText value="#{lr.resourceName}"/>
						</h:outputLink>
						<h:outputLink rendered="#{lr.type eq LogicalResourceType.IP_ADDRESS}"
									  value="../logicalresources/ipaddress/IpAddressView.xhtml?ipAddress=IPAddress-#{lr.id}">
							<h:outputText value="#{lr.resourceName}"/>
						</h:outputLink>
					</p:column>
					<p:column headerText="#{overallBundle['box.overall.type']}">
						<h:outputText value="#{lr.type.name}"/>
					</p:column>
				</p:dataTable>
			</p:outputPanel>
		</div>
	</div>
</ui:composition>