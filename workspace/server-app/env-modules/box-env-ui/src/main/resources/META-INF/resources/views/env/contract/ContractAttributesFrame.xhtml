<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<f:loadBundle var="contractBundle" basename="ContractBundle"/>
	<f:loadBundle var="documentTypeBundle" basename="DocumentTypeBundle"/>
	<div class="m-container100 m-responsive100">
		<div class="m-container-indent">
			<div class="m-card m-shadow-effect m-hei-auto-on-mobile">
				<h:form id="contract_attributes_form">

					<o:importConstants type="ru.argustelecom.box.env.contract.lifecycle.ContractLifecycle.Behaviors" var="behavior"/>

					<div class="columns">

						<div class="column m-vertical-al-middle m-pad-0">
							<p:panelGrid id="contract_id_grid" columns="1" layout="grid" styleClass="ui-panelgrid-blank m-tex-al-center column-id">
								<i class="fs50 fa fa-list-alt"/>
								<h:outputText styleClass="fs16"
											  value="#{overallBundle['box.overall.id']} #{contractAttributesFrameModel.contract.id}" />
							</p:panelGrid>
						</div>

						<div class="column width-100-percents">
							<div class="columns">
								<div class="column m-container50 m-responsive100">
									<dl class="name-value width-150 m-mar-bot-0">
										<dt>
											<p:outputLabel for="number" value="#{contractBundle['box.contract.number']}:"/>
										</dt>
										<dd>
											<h:outputText id="number" styleClass="m-mar-left-8" value="#{contractAttributesFrameModel.contract.documentNumber}"/>
										</dd>

										<dt>
											<p:outputLabel for="type" value="#{overallBundle['box.overall.type']}:"/>
										</dt>
										<dd>
											<h:outputText id="type" styleClass="m-mar-left-8" value="#{contractAttributesFrameModel.contract.type.objectName}"/>
										</dd>

										<dt>
											<p:outputLabel for="state" value="#{overallBundle['box.overall.state']}:"/>
										</dt>
										<dd>
											<h:outputText id="state" styleClass="m-mar-left-8"
														  value="#{contractAttributesFrameModel.contract.state.name}"/>
										</dd>

									</dl>


									<sysinf:editableSection disabled="#{!p:ifGranted('CRM_ContractEdit') or behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.order)}"
															saveLabel="#{overallBundle['box.overall.save']}"
															cancelLabel="#{overallBundle['box.overall.cancel']}">
										<dl class="name-value width-150">
											<dt>
												<p:outputLabel for="order" value="#{contractBundle['box.contract.order']}:"/>
											</dt>
											<dd>
												<p:selectOneMenu id="order" value="#{contractAttributesFrameModel.contract.order}"
																 disabled="#{behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.order)}">
													<f:selectItem itemValue=""/>
													<f:selectItems value="#{contractAttributesFrameModel.possibleOrders}" var="order"
																   itemValue="#{order}" itemLabel="#{order.objectName}"/>
												</p:selectOneMenu>
											</dd>
										</dl>
									</sysinf:editableSection>

								</div>

								<div class="column m-container50 m-responsive100">
									<sysinf:editableSection disabled="#{!p:ifGranted('CRM_ContractEdit') or (behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.editPaymentCondition))}">
										<dl class="name-value width-140">

											<o:importConstants type="ru.argustelecom.box.env.contract.model.PaymentCondition" var="paymentCondition"/>

											<dt>
												<p:outputLabel for="payment_condition" value="#{contractBundle['box.contract.payment_condition']}:"/>
											</dt>
											<dd>
												<p:selectOneMenu id="payment_condition" value="#{contractAttributesFrameModel.contract.paymentCondition}">
													<f:selectItem itemValue=""/>
													<f:selectItems value="#{paymentCondition.values()}" var="pc" itemLabel="#{pc.name}" itemValue="#{pc}"/>
												</p:selectOneMenu>
											</dd>
										</dl>
									</sysinf:editableSection>

									<sysinf:editableSection disabled="#{!p:ifGranted('CRM_ContractEdit') or (behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.validFrom))}"
															id="validity_date_from"
																					 saveLabel="#{overallBundle['box.overall.save']}"
																					 cancelLabel="#{overallBundle['box.overall.cancel']}">
									<dl class="name-value width-140">
										<dt>
											<p:outputLabel for="valid_from" value="#{overallBundle['box.overall.valid_from']}:"/>
										</dt>
										<dd class="nv-composit">
											<p:calendar id="valid_from" value="#{contractAttributesFrameModel.contract.validFrom}"
														pattern="#{dateUtils.DATE_DEFAULT_PATTERN}"
														disabled="#{behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.validFrom)}"
														locale="#{languageBean.locale.language}"
														label="#{overallBundle['box.overall.valid_from']}"/>

										</dd>
									</dl>
									</sysinf:editableSection>

									<sysinf:editableSection disabled="#{!p:ifGranted('CRM_ContractEdit') or (behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.validTo))}"
															id="validity_date_to"
															saveLabel="#{overallBundle['box.overall.save']}"
															cancelLabel="#{overallBundle['box.overall.cancel']}">
									<dl class="name-value width-140">
										<dt>
											<p:outputLabel for="valid_to" value="#{overallBundle['box.overall.valid_to']}:"/>
										</dt>
										<dd class="nv-composit">
											<p:calendar id="valid_to" value="#{contractAttributesFrameModel.contract.validTo}"
														pattern="#{dateUtils.DATE_DEFAULT_PATTERN}"
														disabled="#{behaviorUtils.isForbidden(contractAttributesFrameModel.contract, behavior.validTo)}"
														locale="#{languageBean.locale.language}"
														label="#{overallBundle['box.overall.valid_to']}"/>
										</dd>
									</dl>
								</sysinf:editableSection>

								<dl class="name-value width-140">
									<dt>
										<p:outputLabel for="provider" value="#{documentTypeBundle['box.doc.type.contract.provider']}:"/>
									</dt>
									<dd>
										<h:outputText id="provider" styleClass="m-mar-left-8" value="#{contractAttributesFrameModel.contract.type.provider.objectName}"/>
									</dd>

									<o:importConstants type="ru.argustelecom.box.env.contract.model.ContractCategory" var="contractCategory" />
									<ui:fragment rendered="#{contractAttributesFrameModel.contract.type.contractCategory eq contractCategory.AGENCY}">
										<dt>
											<p:outputLabel for="broker" value="#{contractBundle['box.contract.broker']}:"/>
										</dt>
										<dd>
											<h:outputText id="broker" styleClass="m-mar-left-8" value="#{contractAttributesFrameModel.contract.broker.objectName}"/>
										</dd>
									</ui:fragment>
								</dl>
								</div>
							</div>
						</div>

						<div class="column m-pad-0 m-tex-al-right">
							<div class="width-180 m-tex-al-right">
								<ui:include src="/views/env/lifecycle/LifecycleFrame.xhtml">
									<ui:param name="businessObject" value="#{contractAttributesFrameModel.contract}"/>
									<ui:param name="phaseListener" value="#{contractLifecycleExtenderFm}" />
									<ui:param name="update" value="contract_attributes_form activity_form cotract_extansions_form"/>
									<ui:param name="styleClass" value="splitbutton-width-142 m-mar-bot10"/>
									<ui:param name="readonly" value="#{!p:ifGranted('CRM_ContractStatusEdit')}"/>
								</ui:include>

								<ui:fragment rendered="#{!behaviorUtils.isForbidden(currentContract.value, behavior.remove)}">
									<p:commandButton id="delete" value="#{overallBundle['box.overall.delete']}"
													 action="#{contractAttributesFrameModel.remove()}" styleClass="width-100-percents m-mar-bot10"
										disabled="#{!p:ifGranted('CRM_ContractDelete')}"/>
								</ui:fragment>
								<div>
									<ui:include src="/views/env/report/TemplateExportedFrame.xhtml">
										<ui:param name="templates" value="#{contractAttributesFrameModel.contract.type.templates}"/>
										<ui:param name="exportFnc" value="#{contractAttributesFrameModel.exportFnc}"/>
									</ui:include>
								</div>
							</div>
						</div>
					</div>
				</h:form>
			</div>
		</div>
	</div>

</ui:composition>