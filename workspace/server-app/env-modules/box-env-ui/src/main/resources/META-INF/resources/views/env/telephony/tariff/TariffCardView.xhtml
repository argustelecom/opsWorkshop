<ui:composition template="/views/inf/page/View.xhtml" xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:p="http://primefaces.org/ui">

	<ui:param name="viewModel" value="#{tariffCardVm}"/>
	<ui:param name="pageTitle" value="#{tariffBundle['box.telephony.tariff']}"/>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="tariff" value="#{currentTariff.value}" required="#{!facesContext.postback}"
						 requiredMessage="Tariff param required"/>
		</f:metadata>
	</ui:define>

	<ui:define name="head">
		<h:outputStylesheet name="box-env/styles/box-env.css"/>
		<h:outputStylesheet name="inf/styles/box-functional-block.css"/>
		<f:loadBundle var="tariffBundle" basename="TariffBundle"/>
	</ui:define>

	<ui:define name="pagePath">
		<p:menuitem value="#{overallBundle['box.overall.home']}" url="/views/env/home/HomeView.xhtml"/>
		<p:menuitem value="#{tariffBundle['box.telephony.tariff.tariffs']}"
					url="/views/env/telephony/tariff/TariffListView.xhtml"
					disabled="#{!p:ifGranted('ProductManagment_TariffView')}"/>
		<p:menuitem value="#{tariffCardVm.currentTariff.value.objectName}"/>
	</ui:define>

	<ui:define name="body">
		<ui:include src="TariffAttributesFrame.xhtml">
			<ui:param name="tariff" value="#{tariffCardVs.tariffDto}"/>
		</ui:include>

		<div class="m-container100 m-responsive100">
			<ui:include src="TariffEntryFrame.xhtml">
				<ui:param name="tariff" value="#{tariffCardVs.tariffDto}"/>
				<ui:param name="update" value="tariff_entry_history_form"/>
			</ui:include>
		</div>

		<div class="m-container40 m-responsive100">
			<ui:include src="TariffEntryHistoryFrame.xhtml"/>
		</div>

		<div class="m-container60 m-responsive100">
			<div class="m-container-indent">
				<div class="m-card m-shadow-effect m-hei-auto-on-mobile">
					<ui:include src="/views/env/activity/ActivityFrame.xhtml">
						<ui:param name="contextObject" value="#{tariffCardVs.tariffDto.getIdentifiable()}"/>
					</ui:include>
				</div>
			</div>
		</div>
	</ui:define>

	<ui:define name="dialogs">
		<ui:include src="TariffEntryEditDialog.xhtml">
			<ui:param name="update" value="tariff_entry_form tariff_entry_history_form"/>
		</ui:include>

		<ui:include src="TariffEntryConfirmDialog.xhtml">
			<ui:param name="update" value="tariff_entry_form tariff_entry_history_form"/>
		</ui:include>

		<ui:include src="TariffEntryCreationConfirmDialog.xhtml">
			<ui:param name="update" value="tariff_entry_form tariff_entry_history_form"/>
		</ui:include>

		<ui:include src="/views/env/lifecycle/LifecycleRoutingDialog.xhtml">
			<ui:param name="update" value="tariff_attributes_form tariff_entry_form tariff_entry_history_form"/>
		</ui:include>

		<ui:include src="/views/env/activity/comment/CommentEditDialog.xhtml"/>

		<ui:include src="/views/env/telephony/tariff/import/TariffEntryImportDialog.xhtml">
			<ui:param name="update" value="tariff_entry_form"/>
		</ui:include>
	</ui:define>

</ui:composition>