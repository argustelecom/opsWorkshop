<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
                xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:boxenv="http://argustelecom.ru/box/env">

    <h:form id="option_contract_entry_creation_form">

        <p:dialog id="option_contract_entry_creation_dlg" header="#{contractBundle['box.contract.option_entry.create_dialog']}"
                  widgetVar="optionContractEntryCreationDlgVar" width="700" styleClass="icon-creation" resizable="false"
                  modal="true" closable="false" dynamic="true">

            <dl class="name-value width-110">
                <dt>
                    <p:outputLabel for="service" value="#{contractBundle['box.contract.entry.service']}:"/>
                </dt>
                <dd>
                    <p:selectOneMenu id="service" value="#{optionContractEntryCreationDm.creationDto.service}"
                                     required="true" label="#{contractBundle['box.contract.entry.service']}">

                        <p:ajax process="@this" listener="#{optionContractEntryCreationDm.onServiceSelected()}" update="option_type"/>

                        <f:selectItem itemValue=""/>
                        <f:selectItems value="#{optionContractEntryCreationDm.services}" var="service"
                                       itemValue="#{service}" itemLabel="#{service.name} #{service.id} (#{service.contractName})"/>
                    </p:selectOneMenu>
                </dd>

                <dt>
                    <p:outputLabel for="option_type" value="#{contractBundle['box.contract.option_entry']}:"/>
                </dt>
                <dd>
                    <p:selectOneMenu id="option_type" value="#{optionContractEntryCreationDm.creationDto.optionType}"
                                     required="true" disabled="#{optionContractEntryCreationDm.creationDto.service eq null}"
                                     label="#{contractBundle['box.contract.option_entry.option_entry']}">
                        <f:selectItem itemValue=""/>
                        <f:selectItems value="#{optionContractEntryCreationDm.optionTypes}" var="optionType"
                                       itemValue="#{optionType}" itemLabel="#{optionType.objectName}"/>
                    </p:selectOneMenu>
                </dd>

                <dt>
                    <p:outputLabel for="tariff" value="#{contractBundle['box.contract.option_entry.tariff']}:"/>
                </dt>
                <dd>
                    <p:selectOneMenu id="tariff" value="#{optionContractEntryCreationDm.creationDto.tariff}"
                                     required="true" label="#{contractBundle['box.contract.option_entry.option_tariff']}">
                        <f:selectItem itemValue=""/>
                        <f:selectItems value="#{optionContractEntryCreationDm.tariffs}" var="tariff"
                                       itemValue="#{tariff}" itemLabel="#{tariff.objectName}"/>
                    </p:selectOneMenu>
                </dd>
            </dl>

            <div class="dialog-footer-buttons">
                <p:commandButton id="cancel_button" value="#{overallBundle['box.overall.cancel']}"
                                 styleClass="m-blue-text-button" update="option_contract_entry_creation_dlg"
                                 process="@this" action="#{optionContractEntryCreationDm.cancel()}"
                                 onclick="PF('optionContractEntryCreationDlgVar').hide()"/>
                <p:commandButton id="create_button" value="#{overallBundle['box.overall.create']}"
                                 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('optionContractEntryCreationDlgVar').hide()}"
                                 action="#{optionContractEntryCreationDm.submit()}" process="option_contract_entry_creation_dlg" update="#{update}"/>
            </div>

        </p:dialog>
    </h:form>

</ui:composition>