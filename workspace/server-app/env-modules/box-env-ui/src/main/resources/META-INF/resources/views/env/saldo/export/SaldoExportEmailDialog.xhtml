<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <f:loadBundle basename="SaldoExportBundle" var="saldoExportBundle"/>

    <h:form id="#{formId}">
        <p:dialog id="saldo_export_email_dlg" header="#{saldoExportBundle['box.saldo.export.email.create_dialog']}" width="600"
                  widgetVar="#{dlgWidgetVar}" resizable="false" modal="false" closable="false" dynamic="true" styleClass="saldo-export-email">
            <dl class="name-value width-90">
                <dt>
                    <p:outputLabel for="email" value="#{saldoExportBundle['box.saldo.export.email.create_dialog.contact']}" />
                </dt>
                <dd>
                    <p:inputText id="email" value="#{emailsDM.newEmail}" styleClass="width-80-percents"/>

                    <p:commandButton icon="fa fa-plus" action="#{emailsDM.add()}" styleClass="param-icon m-mar-left20 m-bold-gray-back tooltip"
                                     id="settingsttp" position="top" title="#{saldoExportBundle['box.saldo.export.email.create_dialog.add']}" process="@this email"
                                     update="new_emails_table email">
                    </p:commandButton>
                    <p:tooltip id="saldo_sett_ttp" for="settingsttp" />
                </dd>
            </dl>

            <p:dataTable id="new_emails_table" value="#{emailsDM.newEmails}" var="email" styleClass="hide-tr-header"
                         emptyMessage="#{saldoExportBundle['box.saldo.export.email.create_dialog.empty']}">
                <p:column>
                    <h:outputText value="#{email}"/>
                </p:column>
            </p:dataTable>

            <div class="dialog-footer-buttons">
                <p:commandButton id="cancel_button" value="#{overallBundle['box.overall.cancel']}"
                                 styleClass="m-blue-text-button" process="@this"
                                 action="#{emailsDM.cancel()}" onclick="clearInput(); PF('#{dlgWidgetVar}').hide()" />
                <p:commandButton id="create_email_button" value="#{overallBundle['box.overall.save']}"
                                 process="@this" oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('#{dlgWidgetVar}').hide()}"
                                 action="#{emailsDM.execute()}" update="#{update}" onclick="clearInput()"/>
            </div>
            <script type="text/javascript">
                function clearInput() {
                    $("#saldo_export_emails_for_success_dlg_form-email").val("");
                }
            </script>
        </p:dialog>
    </h:form>
</ui:composition>