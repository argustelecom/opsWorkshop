<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
			  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
			  xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

	<f:loadBundle var="saldoImportBundle" basename="SaldoImportBundle"/>
	<div class="m-container100 m-responsive100">

		<div class="m-mar-top5">

			<div class="m-card m-shadow-effect custom-content-card simple-fb">

				<div class="ui-dashboard-header">
					<i class="icon-done_all"/>
                    <h:outputText styleClass="card-header" value="#{saldoImportBundle['box.saldo.import.step.finish.results']}"/>
                    <h:outputText id="finishttp" class="icon-help_outline tooltip-help-15" position="top"
                                  title="#{saldoImportBundle['box.saldo.import.step.finish.hint']}"/>
                    <p:tooltip id="finis_help_ttp" for="finishttp"/>
				</div>

				<div class="margin-16px">

					<o:importConstants type="ru.argustelecom.box.env.saldo.imp.model.ResultType" var="resultType"/>

					<p:dataTable value="#{registerImportVM.notEmptyContainers}" var="container" emptyMessage="#{overallBundle['box.overall.empty']}">
						<p:column styleClass="width-16">
							<i class="#{container.type eq resultType.SUITABLE ? 'icon-check m-green' : 'icon-cross m-red'} fs16"/>
						</p:column>

						<p:column headerText="#{saldoImportBundle['box.saldo.import.analysis.result']}">
							<h:outputText value="#{container.type eq resultType.SUITABLE ? saldoImportBundle['box.saldo.import.step.finish.imported'] : saldoImportBundle['box.saldo.import.step.finish.not_imported']}"/>
						</p:column>

						<p:column headerText="#{overallBundle['box.overall.desc']}">
							<h:outputText value="#{container.errorsDescription}"/>
						</p:column>

						<p:column headerText="#{saldoImportBundle['box.saldo.import.quantity']}">
							<h:outputText value="#{container.items.size()}"/>
						</p:column>

						<p:column styleClass="width-24">
							<o:importConstants type="ru.argustelecom.box.env.saldo.imp.RegisterImportViewModel$Step" var="step"/>
							<f:facet name="header">
								<p:commandLink title="#{overallBundle['box.overall.download.all']}" position="left" ajax="false"
											   icon="fa fa-download">
									<i class="icon-get_app fs20 m-bold-gray fs16" />
									<f:setPropertyActionListener value="#{registerImportVM.register}" target="#{registerImportDownloadFM.register}"/>
									<p:fileDownload value="#{registerImportDownloadFM.downloadAll(step.IMPORT_FINISHED.id)}"/>
								</p:commandLink>
							</f:facet>

							<p:commandLink title="#{overallBundle['box.overall.download']}" position="left" ajax="false" id="focus"
										   icon="fa fa-download">
								<i class="icon-get_app fs20 m-bold-gray fs16" />
								<f:setPropertyActionListener value="#{registerImportVM.register}" target="#{registerImportDownloadFM.register}"/>
								<p:fileDownload value="#{registerImportDownloadFM.downloadContainer(container, step.IMPORT_FINISHED.id)}"/>
							</p:commandLink>
							<p:tooltip id="ttpp" for="focus"/>
						</p:column>

					</p:dataTable>

				</div>

			</div>

		</div>

	</div>

</ui:composition>
