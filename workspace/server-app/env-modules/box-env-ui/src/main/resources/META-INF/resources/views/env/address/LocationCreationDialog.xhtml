<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
				xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
				xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

	<o:importConstants type="ru.argustelecom.box.env.address.LocationCategory" var="category"/>

	<h:form id="location_creation_form">
		<p:dialog id="location_creation_dlg" header="#{addressDirectoryViewModel.creationDialogHeader}" width="500"
				  widgetVar="locationCreationDlg" styleClass="icon-creation" resizable="false" modal="true" closable="false" dynamic="true">

			<dl class="name-value width-130">
				<dt>
					<p:outputLabel for="new_parent" value="#{locationBundle['box.location']}:"
								   rendered="#{not (addressDirectoryViewModel.newCategory eq category.COUNTRY)}"/>
				</dt>
				<dd>
					<p:inputText id="new_parent" value="#{addressDirectoryViewModel.location.fullName}"
								 disabled="true" rendered="#{not (addressDirectoryViewModel.newCategory eq category.COUNTRY)}"/>
				</dd>

				<dt>
					<p:outputLabel for="new_name" value="#{overallBundle['box.overall.name']}:"/>
				</dt>
				<dd>
					<p:inputText id="new_name" value="#{addressDirectoryViewModel.newName}" maxlength="64" required="true"
								 label="#{overallBundle['box.overall.name']}"/>
				</dd>

				<dt>
					<p:outputLabel for="new_level" value="#{locationBundle['box.location.level']}:"
								   rendered="#{addressDirectoryViewModel.newCategory eq category.REGION}"/>
				</dt>
				<dd>
					<p:selectOneMenu id="new_level" value="#{addressDirectoryViewModel.newLevel}"
									 required="true" rendered="#{addressDirectoryViewModel.newCategory eq category.REGION}"
									 label="#{locationBundle['box.location.level']}">

						<p:ajax process="@this" update="new_type"/>

						<f:selectItems value="#{addressDirectoryViewModel.levels}" var="level"
									   itemValue="#{level}" itemLabel="#{level.objectName}"/>
					</p:selectOneMenu>
				</dd>

				<dt>
					<p:outputLabel for="new_type" value="#{locationBundle['box.location.type']}:"
								   rendered="#{not (addressDirectoryViewModel.newCategory eq category.COUNTRY)}"/>
				</dt>
				<dd>
					<p:selectOneMenu id="new_type" value="#{addressDirectoryViewModel.newType}" required="true"
									 label="#{locationBundle['box.location.type']}"
									 rendered="#{not (addressDirectoryViewModel.newCategory eq category.COUNTRY)}">
						<f:selectItems value="#{addressDirectoryViewModel.types}" var="type"
									   itemValue="#{type}" itemLabel="#{type.objectName}"/>
					</p:selectOneMenu>
				</dd>
			</dl>

			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_button" value="#{overallBundle['box.overall.cancel']}"
								 styleClass="m-blue-text-button" update="location_creation_dlg" resetValues="true"
								 process="@this" action="#{addressDirectoryViewModel.cleanParams()}" onclick="PF('locationCreationDlg').hide()"/>
				<p:commandButton id="create_button" value="#{overallBundle['box.overall.create']}"
								 action="#{addressDirectoryViewModel.create()}" update="#{update} new_parent new_name new_level new_type"/>
			</div>

		</p:dialog>
	</h:form>

</ui:composition>