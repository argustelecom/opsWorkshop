<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:o="http://omnifaces.org/ui"
				xmlns:sysinf="http://argustelecom.ru/system-inf" xmlns:pm="http://primefaces.org/modena"
				xmlns:f="http://java.sun.com/jsf/core" xmlns:boxenv="http://argustelecom.ru/box/env">

	<h:form id="bill_type_create_form">

		<o:importConstants type="ru.argustelecom.box.env.billing.bill.model.BillPeriodType" var="billPeriodTypes"/>
		<o:importConstants type="ru.argustelecom.box.env.stl.period.PeriodUnit" var="periodUnits"/>
		<o:importConstants type="ru.argustelecom.box.env.contract.model.PaymentCondition" var="paymentConditions"/>
		<o:importConstants type="ru.argustelecom.box.env.billing.bill.model.GroupingMethod" var="groupingMethods"/>

		<p:dialog id="bill_type_create_dlg" header="#{documentTypeBundle['box.doc.type.bill.create_dialog']}" width="550"
				  widgetVar="billTypeCreationDlgVar" styleClass="icon-creation"
				  resizable="false" modal="true" closable="false" dynamic="true">

			<dl class="name-value width-130 name-value-tooltip">

				<!--Название-->
				<dt>
					<p:outputLabel for="bill_type_name" value="#{overallBundle['box.overall.name']}:"/>
				</dt>
				<dd>
					<p:inputText id="bill_type_name" value="#{billTypeCreateDm.billType.name}" required="true"
								 maxlength="128" label="#{overallBundle['box.overall.name']}"/>
				</dd>

				<!--Описание-->
				<dt>
					<p:outputLabel for="bill_type_desc" value="#{overallBundle['box.overall.desc']}:"/>
				</dt>
				<dd>
					<p:inputTextarea id="bill_type_desc" value="#{billTypeCreateDm.billType.description}"
									 rows="2" counter="bill_type_desc_counter" maxlength="256"
									 counterTemplate="#{overallBundle['box.overall.chars_left']}" autoResize="false"/>
					<h:outputText id="bill_type_desc_counter" styleClass="fs12"/>
				</dd>

				<!--Поставщик-->
				<dt>
					<p:outputLabel for="bill_type_providers" value="#{documentTypeBundle['box.doc.type.bill.provider']}:"/>
				</dt>
				<dd>
					<p:selectCheckboxMenu id="bill_type_providers" value="#{billTypeCreateDm.billType.providers}"
										  styleClass="width-85-percents" required="true"
										  label="#{documentTypeBundle['box.doc.type.bill.provider']}"
										  multiple="true" filter="true" filterMatchMode="startsWith"
										  converter="omnifaces.SelectItemsConverter">
						<f:selectItems value="#{billTypeCreateDm.providers}"/>
					</p:selectCheckboxMenu>
				</dd>

				<!--Тип клиента-->
				<dt>
					<p:outputLabel for="bill_type_customer_type" value="#{documentTypeBundle['box.doc.type.customer.type']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="bill_type_customer_type" value="#{billTypeCreateDm.billType.customerType}">

						<f:selectItem itemValue="#{null}" itemLabel="#{documentTypeBundle['box.doc.type.bill.customer_type.label']}"/>
						<f:selectItems value="#{billTypeCreateDm.customerTypes}" var="cs" itemValue="#{cs}"
									   itemLabel="#{cs.name}"/>
					</p:selectOneMenu>
				</dd>

				<!--Тип периода-->
				<dt>
					<p:outputLabel for="bill_type_period_type" value="#{documentTypeBundle['box.doc.type.bill.period.type']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="bill_type_period_type" value="#{billTypeCreateDm.billType.periodType}" required="true"
									 label="#{documentTypeBundle['box.doc.type.bill.period.type']}">
						<p:ajax process="@this" listener="#{billTypeCreateDm.onPeriodTypeChanged()}"
								update="bill_type_period_unit_label bill_type_period_unit bill_type_summary_bill_anal" />

						<f:selectItems value="#{billPeriodTypes}" var="billPeriodType" itemValue="#{billPeriodType}"
									   itemLabel="#{billPeriodType.name}"/>
					</p:selectOneMenu>
					<h:outputText id="ptttp" class="icon-help_outline tooltip-help" position="top"
								  title="#{documentTypeBundle['box.doc.bill.type.period.type.hint']}"/>
					<p:tooltip id="ttp1" for="ptttp"/>
				</dd>

				<!--Единица периода-->
				<dt>
					<p:outputLabel id="bill_type_period_unit_label" for="bill_type_period_unit"
								   value="#{documentTypeBundle['box.doc.type.bill.period.unit']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="bill_type_period_unit" value="#{billTypeCreateDm.billType.periodUnit}"
									 disabled="#{billTypeCreateDm.billType.periodType eq billPeriodTypes.CUSTOM or billTypeCreateDm.billType.periodType eq null}"
									 required="#{billTypeCreateDm.billType.periodType eq billPeriodTypes.CALENDARIAN}">
						<f:selectItems value="#{billTypeCreateDm.billType.periodType.units}" var="billingPeriodUnit" itemValue="#{billingPeriodUnit}"
									   itemLabel="#{billingPeriodUnit}"/>
					</p:selectOneMenu>
				</dd>

				<!--Группировка-->
				<dt>
					<p:outputLabel for="bill_type_grouping" value="#{documentTypeBundle['box.doc.type.bill.grouping_method']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="bill_type_grouping" value="#{billTypeCreateDm.billType.groupingMethod}" required="true">
						<f:selectItems value="#{groupingMethods}" var="groupingMethod" itemValue="#{groupingMethod}"
									   itemLabel="#{groupingMethod.name}"/>
					</p:selectOneMenu>
					<h:outputText id="gttp" class="icon-help_outline tooltip-help" position="top"
								  title="#{documentTypeBundle['box.doc.type.bill.dlg.group_hint']}"/>
					<p:tooltip id="ttp2" for="gttp"/>

				</dd>

				<!--Схема расчета-->
				<dt>
					<p:outputLabel for="bill_type_payment_condition" value="#{documentTypeBundle['box.doc.type.bill.payment_condition']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="bill_type_payment_condition" value="#{billTypeCreateDm.billType.paymentCondition}" required="true">
						<f:selectItems value="#{paymentConditions}" var="paymentCondition" itemValue="#{paymentCondition}"
									   itemLabel="#{paymentCondition.name}"/>
					</p:selectOneMenu>
					<h:outputText id="pcttp" class="icon-help_outline tooltip-help" position="top"
								  title="#{documentTypeBundle['box.doc.type.bill.payment_condition.hint']}"/>
					<p:tooltip id="ttp3" for="pcttp"/>

				</dd>

				<!--Сумма к оплате-->
				<dt>
					<p:outputLabel for="bill_type_summary_bill_anal" value="#{documentTypeBundle['box.doc.type.bill.summary_bill_anal']}:"/>
				</dt>
				<dd>
					<p:selectOneMenu id="bill_type_summary_bill_anal" value="#{billTypeCreateDm.billType.summaryBillAnalyticType}"
									 disabled="#{billTypeCreateDm.billType.periodType eq null}" required="true"
									 label="#{documentTypeBundle['box.doc.type.bill.summary_bill_anal']}">
						<f:selectItems value="#{billTypeCreateDm.summaryBillAnalyticTypes}" var="sbat" itemValue="#{sbat}"
									   itemLabel="#{sbat.name}"/>
					</p:selectOneMenu>
					<h:outputText id="sbattp" class="icon-help_outline tooltip-help" position="top"
								  title="#{documentTypeBundle['box.doc.type.bill.summary_bill_anal.hint']}"/>
					<p:tooltip id="ttp4" for="sbattp"/>
				</dd>
			</dl>

			<div class="dialog-footer-buttons">
				<p:commandButton id="cancel_button" styleClass="m-blue-text-button"
								 value="#{overallBundle['box.overall.cancel']}"
								 action="#{billTypeCreateDm.reset()}" update="bill_type_create_form" process="@this"
								 oncomplete="PF('billTypeCreationDlgVar').hide()" resetValues="true"/>
				<p:commandButton id="create_button" value="#{overallBundle['box.overall.create']}"
								 action="#{billTypeCreateDm.create()}" update="#{update}"
								 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('billTypeCreationDlgVar').hide()}" />
			</div>
		</p:dialog>
	</h:form>
</ui:composition>