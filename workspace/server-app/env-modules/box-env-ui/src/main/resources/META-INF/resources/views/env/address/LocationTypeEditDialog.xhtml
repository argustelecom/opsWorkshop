<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:o="http://omnifaces.org/ui" xmlns:sysinf="http://argustelecom.ru/system-inf"
                xmlns:pm="http://primefaces.org/modena" xmlns:f="http://java.sun.com/jsf/core">

    <h:form id="location_type_edit_form">

        <o:importConstants type="ru.argustelecom.box.env.address.LocationCategory" var="category"/>

        <p:dialog id="location_type_edit_dlg" header="#{locationTypeEditDlgM.getHeader()}" width="500" styleClass="icon-creation"
                  widgetVar="locationTypeEditDlgVar" resizable="false" modal="true" closable="false" dynamic="true">

            <p:outputPanel styleClass="m-tex-al-center m-mar-bot10">
                <p:selectOneButton id="new_category" value="#{locationTypeEditDlgM.newCategory}" disabled="#{locationTypeEditDlgM.isEditMode()}">

                    <p:ajax event="change" update="new_attributes"/>

                    <f:selectItems value="#{locationTypeEditDlgM.categories}" var="newCategory"
                                   itemLabel="#{newCategory.name}" itemValue="#{newCategory}"/>
                </p:selectOneButton>
            </p:outputPanel>

            <p:outputPanel id="new_attributes">
                <dl class="name-value width-130">
                    <dt>
                        <p:outputLabel for="new_name" value="#{overallBundle['box.overall.name']}:"/>
                    </dt>
                    <dd>
                        <p:inputText id="new_name" value="#{locationTypeEditDlgM.newName}" maxlength="64" required="true"
                                     label="#{overallBundle['box.overall.name']}"/>
                    </dd>

                    <dt>
                        <p:outputLabel for="new_short_name" value="#{locationBundle['box.location.type.name.short']}:"/>
                    </dt>
                    <dd>
                        <p:inputText id="new_short_name" value="#{locationTypeEditDlgM.newShortName}" maxlength="16"
                                     required="true" label="#{locationBundle['box.location.type.name.short']}"/>
                    </dd>

                    <dt>
                        <p:outputLabel id="new_level_label" for="new_level" value="#{locationBundle['box.location.level']}:"
                                       rendered="#{locationTypeEditDlgM.newCategory eq category.REGION}"/>
                    </dt>
                    <dd>
                        <p:selectOneMenu id="new_level" value="#{locationTypeEditDlgM.newLevel}"
                                         required="true" rendered="#{locationTypeEditDlgM.newCategory eq category.REGION}">
                            <f:selectItems value="#{locationTypeEditDlgM.levels}" var="level"
                                           itemValue="#{level}" itemLabel="#{level.objectName}"/>
                        </p:selectOneMenu>
                    </dd>
                </dl>
            </p:outputPanel>

            <div class="dialog-footer-buttons">
                <p:commandButton id="cancel_button" value="#{overallBundle['box.overall.cancel']}"
                                 styleClass="m-blue-text-button" update="location_type_edit_dlg" resetValues="true"
                                 process="@this" action="#{locationTypeEditDlgM.cancel()}" onclick="PF('locationTypeEditDlgVar').hide()"/>
                <p:commandButton id="create_button" value="#{locationTypeEditDlgM.getSubmitButtonLabel()}"
                                 oncomplete="if (args &amp;&amp; !args.validationFailed) {PF('locationTypeEditDlgVar').hide()}"
                                 action="#{locationTypeEditDlgM.submit()}" process="location_type_edit_dlg" update="#{update} new_name new_short_name"/>
            </div>
        </p:dialog>

    </h:form>

</ui:composition>